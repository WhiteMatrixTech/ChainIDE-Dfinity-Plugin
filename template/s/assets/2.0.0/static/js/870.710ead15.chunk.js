(self.webpackChunkchainide=self.webpackChunkchainide||[]).push([[870],{88207:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(24500),a=n(63804),o=n.n(a),i=n(36683),c=n(72779),l=n.n(c),s="lKr-Sa6Yw5H5co0U4gC6o",u=n(64465),d=["title"],f=i.Z.Panel;var m=function(e){var t=e.title,n=(0,u.Z)(e,d);return o().createElement(f,(0,r.Z)({},n,{showArrow:!1,header:o().createElement("div",{className:"header"},t)}))},p=n(29337),h=n(17291),v={root:{width:"100%",height:"100%",selectors:{".chain-ide-item":{borderTopColor:(0,h.l6)(h.Zq.INPUT_BACKGROUND)}}}};function g(e){var t=l()(s,e.className||"");return o().createElement(p.Stack,{styles:v},o().createElement(i.Z,(0,r.Z)({prefixCls:"chain-ide"},e,{className:t})))}g.Panel=m;var y=g},10870:function(e,t,n){"use strict";n.r(t),n.d(t,{Workspace:function(){return vc}});var r=n(20024),a=n(63804),o=n.n(a),i=n(44615),c=n(7267),l=/^\?(.*)/;function s(){return(0,c.UO)()}var u=n(12721),d=n(45744),f=n(57994),m=n(98907),p=n(34902),h=new(function(){function e(){(0,f.Z)(this,e),this._welcomePage=void 0,this._welcomePageChange=new p.Emitter,this.onWelcomePageChange=this._welcomePageChange.event,this._welcomePage=function(){return null}}return(0,m.Z)(e,[{key:"setWelcomePage",value:function(e){this._welcomePage=e,this._welcomePageChange.fire(this._welcomePage)}},{key:"welcomePage",get:function(){return this._welcomePage}},{key:"clear",value:function(){this._welcomePage=function(){return null}}}]),e}()),v=n(42809),g=n(60994),y=n(8234);function E(e,t){return e.filter((function(e){return e.position===t}))}var k=n(31624),b=n(64721),C=n(76515),w=n(25720),x=n(33021),N=n(65171);var T=n(95550),I=n.n(T),Z=n(85358),P=n(17291),O="_3z3to-6Kzuc7sZ7uEnML5K",S=n(95764),L=n(33122),A=n(78585),D=n(6112);var _=n(70270),R="g7QRqGYjjQNMEV-yVk6Zs",M=(0,P.l6)(P.Zq.FONT_LEVEL_THREE),F=(0,P.l6)(P.Zq.BORDER),B=(0,P.l6)(P.Zq.FONT_LEVEL_ONE),U={root:{selectors:{".ms-Nav-navItem":{marginBottom:"4px",selectors:{".is-selected .ms-Button .ms-Icon":{color:B}}},".ms-Button:hover":{backgroundColor:"transparent",color:B,selectors:{".ms-Button-icon":{color:B}}},".ms-Button":{backgroundColor:"transparent",padding:0,selectors:{".ms-Icon":{marginLeft:"13px",fontSize:"24px",color:M}}}}}},z=function(){var e=(0,A.I)(),t=e.left,n=e.layout,r=(0,i.useSelector)((function(e){return e.menus})).menuList,c=[{links:o().useMemo((function(){return r?r.map((function(e){return{name:"",key:e.key,url:"#",icon:e.icon,iconProps:e.iconProps,contentType:e.contentType}})):[]}),[r])}],l=(0,i.useDispatch)(),s=o().useCallback((function(e,r){e&&e.preventDefault(),r&&r.key&&(0===n.left?(l(D.He.updateLayout((0,S.Z)((0,S.Z)({},n),{},{left:300}))),l(D.He.togglePane(r.contentType,r.key))):r.key!==(null===t||void 0===t?void 0:t.key)?l(D.He.togglePane(r.contentType,r.key)):(l(D.He.updateLayout((0,S.Z)((0,S.Z)({},n),{},{left:0}))),l(D.He.closePane(r.contentType))),(0,_.Kz)({eventType:"MENU_BUTTON",action:_.A3.click,extra:{key:r.key}}))}),[l,n,t]);return(0,a.useEffect)((function(){n.left>0&&(null!==t&&void 0!==t&&t.contentType||l(D.He.togglePane(r[0].contentType,r[0].key)))}),[l,n,t]),o().createElement("div",{className:R,style:{backgroundColor:F}},o().createElement(_.p_,{eventType:"MENU_START",action:_.A3.exposure}),o().createElement(L.J,{styles:U,onLinkClick:s,selectedKey:t&&t.key,ariaLabel:"Nav",groups:c}))},j=n(16798),V=n(31396),H=n(72779),G=n.n(H),W=n(97296),K=n(64428),Q=n(4101),q=n(23183),J=n(31763),Y=n.n(J),X=function(e){(0,K.Z)(n,e);var t=(0,Q.Z)(n);function n(e,r){var a;return(0,f.Z)(this,n),(a=t.call(this))._dom=void 0,a._projectId=void 0,a._timeGap=0,a._dom=e,a._projectId=r,a}return(0,m.Z)(n,[{key:"handleTimers",value:function(){var e=(0,Z.Z)(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._timeGap+=t,!(this._timeGap>60)){e.next=5;break}return e.next=4,this.updateThumbnail();case 4:this._timeGap=0;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateThumbnail",value:function(){var e=(0,Z.Z)(I().mark((function e(){var t,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this._dom||!this._projectId){e.next=8;break}return e.next=4,Y()(this._dom,{scale:.6,width:440,height:248});case 4:return t=e.sent,n=t.toDataURL()||"",e.next=8,q.B.updateProjectThumbnail(this._projectId,n);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"destory",value:function(){this.stop()}}],[{key:"createThumbnail",value:function(e,t){return n.thumbnailInstance&&n.thumbnailInstance.stop(),n.thumbnailInstance=new n(e,t),n.thumbnailInstance}}]),n}(n(42146).Y);X.thumbnailInstance=void 0;var $=n(87876),ee=n(93095),te=n(78636),ne=n(39222),re=function(e){var t=(0,a.useState)(),n=(0,r.Z)(t,2),o=n[0],i=n[1];return(0,a.useLayoutEffect)((function(){i(e.current.getBoundingClientRect())}),[e]),(0,ne.Z)(e,(function(e){return i(e.contentRect)})),o||{height:0,width:0,left:0,top:0,bottom:0,right:0}},ae=n(8665),oe=n(23279),ie=n.n(oe),ce=n(47427),le=n(28466),se={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:0,selectOnLineNumbers:!1,wordWrap:"off",lineDecorationsWidth:0,glyphMargin:!1,fixedOverflowWidgets:!0,minimap:{enabled:!1},renderLineHighlight:"none",selectionHighlight:!1,dragAndDrop:!1,cursorWidth:1,fontSize:13,lineHeight:22,wrappingIndent:"none",readOnly:!0,theme:"chainIdeEditTheme"},ue=((0,S.Z)((0,S.Z)({},se),{},{glyphMargin:!0,readOnly:!1}),{js:"javascript",ts:"typescript",sh:"shell",bash:"shell",md:"markdown",mvir:"rust",compiled:"json",deployed:"json",mo:"motoko"});function de(e){var t=/[^\.|/]\w*$/.exec(e);return t&&t.length>0&&(ue[t[0]]||t[0])||"txt"}var fe=function(){function e(t,n){(0,f.Z)(this,e),this.saved=void 0,this.uri=void 0,this.editorContainer=void 0,this.editorIns=void 0,this.uri=t,this.editorContainer=n,this.editorIns=null,this.saved=!0}return(0,m.Z)(e,[{key:"loadAndInitEditor",value:function(){var e=(0,Z.Z)(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContent().catch((function(e){}));case 2:t=e.sent,this.initMonacoEditor(t||"");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getContent",value:function(){var e=(0,Z.Z)(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.Z.readFileString(this.uri);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEditorContent",value:function(){var e;return null===(e=this.editorIns)||void 0===e?void 0:e.getValue()}},{key:"initMonacoEditor",value:function(e){this.editorContainer.current&&(this.editorIns=le.j6.create(this.editorContainer.current,(0,S.Z)((0,S.Z)({},se),{},{value:e,language:de(this.uri),readOnly:!1,glyphMargin:!0})))}},{key:"focusCursor",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null===(e=this.editorIns)||void 0===e||e.revealPositionInCenter({lineNumber:r,column:a}),null===(t=this.editorIns)||void 0===t||t.setPosition({lineNumber:r,column:a}),null===(n=this.editorIns)||void 0===n||n.focus()}},{key:"onCursorChangeEvent",value:function(e){var t;null===(t=this.editorIns)||void 0===t||t.onDidChangeCursorPosition((function(t){e(t.position.lineNumber,t.position.column)}))}},{key:"onScrollChangeEvent",value:function(e){var t;null===(t=this.editorIns)||void 0===t||t.onDidScrollChange((function(t){e(t.scrollLeft,t.scrollTop)}))}},{key:"setScrollPosition",value:function(e,t){var n;null===(n=this.editorIns)||void 0===n||n.setScrollPosition({scrollLeft:e,scrollTop:t})}},{key:"onSaveEvent",value:function(e){var t,n;null===(t=this.editorIns)||void 0===t||t.addCommand(le.DC.CtrlCmd|le.VD.KEY_S,e),null===(n=this.editorIns)||void 0===n||n.onDidBlurEditorText(e)}},{key:"refetchContent",value:function(){var e=(0,Z.Z)(I().mark((function e(){var t,n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContent();case 2:(r=e.sent)!==(null===(t=this.editorIns)||void 0===t?void 0:t.getValue())&&(null===(n=this.editorIns)||void 0===n||n.setValue(r));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeEvent",value:function(e){var t=this;this.editorIns&&this.editorIns.onDidChangeModelContent((function(n){t.editorIns&&e(n,t.uri,t.editorIns.getValue())}))}},{key:"setError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e===this.uri&&this.editorIns){var n=this.editorIns.getModel();n&&this.setMarks(t,n,e)}}},{key:"setMarks",value:function(e,t,n){var r,a=[],o=(0,ce.Z)(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;a.push((0,S.Z)((0,S.Z)({},i),{},{severity:le.ZL.Error}))}}catch(i){o.e(i)}finally{o.f()}le.j6.setModelMarkers(t,de(n),a)}},{key:"layout",value:function(){var e;null===(e=this.editorIns)||void 0===e||e.layout()}},{key:"destroy",value:function(){var e;null===(e=this.editorIns)||void 0===e||e.dispose(),this.saved=!0,this.editorIns=null}}]),e}(),me=n(18503);function pe(e){var t=e.tab,n=(0,a.useRef)(null),c=re(n),l=c.height,s=c.width,u=(0,a.useRef)(null);(0,a.useEffect)((function(){null!==u.current&&u.current.layout()}),[l,s]);var d=(0,a.useMemo)((function(){var e=(0,ee.OC)(t),n=e.projectId,r=e.path;return[n,(0,ee.i)(n,r)]}),[t]),f=(0,r.Z)(d,2),m=f[0],p=f[1],h=(0,i.useDispatch)(),v=function(e,t,n,o){var i=(0,a.useState)(!1),c=(0,r.Z)(i,2),l=c[0],s=c[1];return(0,a.useEffect)((function(){var r=new fe(e,t);return s(!0),r.loadAndInitEditor().then((function(){r.onSaveEvent((function(){o(me.z.saveChanging())}));var t=ie()((function(e,t,n){e.isFlush?o(me.z.clearChanging(t)):(ae.o.contentChange(t,n),o(me.z.setChanging(t,e,n)))}),1);r.onChangeEvent(t);var n=ie()((function(t,n){ae.o.saveCursorPosition(e,t,n)}),1e3);r.onCursorChangeEvent(n);var a=ie()((function(t,n){ae.o.saveScrollPosition(e,t,n)}),1e3);r.onScrollChangeEvent(a),ae.o.getEditorState(e).then((function(e){e&&void 0!==e.lineNumber&&void 0!==e.column&&r.focusCursor(e.lineNumber,e.column),e&&void 0!==e.scrollLeft&&void 0!==e.scrollTop&&r.setScrollPosition(e.scrollLeft,e.scrollTop)}));var i=r.getEditorContent();i&&ae.o.contentChange(e,i)})).finally((function(){s(!1)})),n.current=r,function(){r.destroy(),n.current=null}}),[e,o,t,n]),l}(p,n,u,h);return function(e,t){(0,a.useEffect)((function(){var n;return e.current&&t&&(n=X.createThumbnail(e.current,t)).start(),function(){n&&(n.stop(),n=void 0)}}),[t,e])}(n,m),(0,a.useEffect)((function(){return ae.o.onEditorErrorEvent((function(e){var t=u.current;null!==t&&t.setError(e.uri,e.errors)})).dispose}),[]),(0,a.useEffect)((function(){return $.Z.onFileContentChange((function(e){e.uri===p&&u.current&&u.current.refetchContent()})).dispose}),[p]),o().createElement("div",{style:{width:"100%",height:"100%",position:"relative"},ref:n},v&&o().createElement(te.L,null))}var he=n(22701),ve=n(29337),ge=n(27196),ye=n.n(ge),Ee=n(46176);var ke=function(e){var t=e.position,n=e.menuItems,r=e.onDismiss,a=e.onItemClick;return o().createElement(Ee.r,{onDismiss:r,onItemClick:a,shouldFocusOnMount:!0,isBeakVisible:!1,target:t,items:n})},be=function(){function e(){var t=this;(0,f.Z)(this,e),this.container=void 0,this.close=function(){ye().unmountComponentAtNode(t.container)},this.renderContextMenu=function(e,n,r,a){return ye().render(o().createElement(ke,{onDismiss:function(){ye().unmountComponentAtNode(t.container),a&&a()},onItemClick:function(e,t){r(t)},position:e,menuItems:n}),t.container),t};var n=document.createElement("div");document.body.append(n),this.container=n}return(0,m.Z)(e,null,[{key:"getInstance",value:function(){return void 0===e.renderInstance&&(e.renderInstance=new e),e.renderInstance}}]),e}();be.renderInstance=void 0;var Ce=function(e,t,n,r){return be.getInstance().renderContextMenu(e,t,n,r)},we=[{key:"close",text:"close"},{key:"closeGroup",text:"Close Group"},{key:"closeAll",text:"Close All"}],xe=[{key:"closeGroup",text:"Close Group"},{key:"closeAll",text:"Close All"}];var Ne,Te=n(15729),Ie="_1FosLeU3X3AICfSuMgwC0e",Ze="_2GdFsrP7msnQOLm8yRknzG",Pe="_1Ykw8OoFcWZrY0b6ve3JDn",Oe="dloDGxxiW7BfXMO4FMCzB",Se="_2-s93f3ek5DEN9j2R7RpG_",Le="xP71Hw5fPNLVHWxWauOIg",Ae="zrP8X5eACIERolCtJkkxd",De="_2fqUnEHaIA3bCrIlGlNQ8l",_e="_1O-KewdkI4xXvECUXi9bBl";function Re(e){var t=e.groupKey,n=e.activeTab,r=(0,i.useDispatch)(),c=(0,a.useCallback)((function(e){e.preventDefault(),Ce({x:e.clientX+15,y:e.clientY+5},xe,(function(e){if(e)switch(e.key){case"closeGroup":r(he.zM.closeGroup(t));break;case"closeAll":r(he.zM.closeAll())}}))}),[r,t]),l=(0,a.useMemo)((function(){return n&&"file"===n.type&&(n.title.endsWith(".md")||n.title.endsWith(".html"))}),[n]),s=(0,a.useCallback)((function(e){if(e.stopPropagation(),n){var a=(0,Te.ZP)(n,(function(e){e.key="".concat(n.path,"_preview"),e.type="preview"}));r(he.zM.openTabInNext(a,t))}}),[r,n,t]),u=(0,a.useCallback)((function(e){e.stopPropagation(),n&&r(he.zM.openTabInNext(n,t))}),[r,n,t]),d=(0,a.useMemo)((function(){return n&&"file"===n.type}),[n]);return o().createElement("div",{className:_e},l&&o().createElement(ve.FontIcon,{title:"preview",iconName:"DocumentSearch",onClick:s}),d&&o().createElement(ve.FontIcon,{title:"split",iconName:"DoubleColumn",onClick:u}),o().createElement(ve.FontIcon,{iconName:"More",onClick:c}))}var Me={root:{backgroundColor:(0,P.l6)(P.Zq.TAB_UN_ACTIVE_BACKGROUND),color:(0,P.l6)(P.Zq.FONT_LEVEL_TWO),selectors:(Ne={},(0,j.Z)(Ne,".".concat(Oe),{backgroundColor:(0,P.l6)(P.Zq.UN_CHOOSE_BAR_BACKGROUND),borderColor:(0,P.l6)(P.Zq.LEFT_AND_RIGHT_PANE_BACKGROUND)}),(0,j.Z)(Ne,".".concat(Oe,".").concat(Ae),{backgroundColor:(0,P.l6)(P.Zq.ALL_BACKGROUND)}),(0,j.Z)(Ne,".".concat(_e),{color:(0,P.l6)(P.Zq.FONT_LEVEL_ONE)}),Ne)}},Fe=n(74596),Be=n(84640),Ue=n(50138);function ze(e,t,n){var r=document.createElement("div");r.className=n,r.textContent=t,e.dataTransfer&&(document.body.appendChild(r),e.dataTransfer.setDragImage(r,-10,-10),setTimeout((function(){return document.body.removeChild(r)}),0))}function je(e){e.stopPropagation(),e.preventDefault()}function Ve(e,t){e.stopPropagation(),e.preventDefault();var n=e.currentTarget;if(!n.querySelector(".overlay")){var r=document.createElement("div");r.className="overlay",n.appendChild(r),Be.F.addHandler(r,"dragover",(function(e){e.stopPropagation(),e.preventDefault()})),Be.F.addHandler(r,"dragleave",(function(e){e.stopPropagation(),e.preventDefault(),n.removeChild(r)})),Be.F.addHandler(r,"drop",(function(e){e.stopPropagation(),e.preventDefault(),n.removeChild(r),t&&t(e)}))}}function He(e){if(e.dataTransfer){var t=e.dataTransfer.getData("fileName");Fe.t6.warning("Unable to open ".concat(t,", file is a directory."))}}var Ge="dragging:";function We(e,t,n){e.dataTransfer.setData("".concat(Ge).concat(function(e){var t,n=[],r=(0,ce.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a);var o=a.charCodeAt(0);o>=65&&o<=90?n.push("1"):n.push("0")}}catch(i){r.e(i)}finally{r.f()}return n.join("")}(n)),""),e.dataTransfer.setData("projectId",t),e.dataTransfer.setData("path",n)}function Ke(e){if(e.dataTransfer.types){var t=e.dataTransfer.types.find((function(e){return e.startsWith(Ge)}));if(t){var n=t.substr(Ge.length);if(n)return function(e){for(var t=[],n=0;n<e.length;n+=2){var r=e[n];"1"===e[n+1]?t.push(r.toUpperCase()):t.push(r)}return t.join("")}(n)}}return null}function Qe(e){return{path:e.dataTransfer.getData("path"),projectId:e.dataTransfer.getData("projectId")}}function qe(e,t,n,r){if(e.dataTransfer){var a=Qe(e),o=a.path,i=a.projectId,c=(0,ee.v3)(i,o);c&&t(void 0!==r?Ue.z.openTabWidthIndex(c,n,r):Ue.z.openTab(c,n))}}var Je=n(83592),Ye="HAG8FVyr8VhnZHH6SNPm6",Xe="_3XJi4koU1QkjKnCfnI84by";function $e(e){var t=e.tab,n=e.groupKey,r=e.className,c=(0,i.useSelector)((function(e){return e.editor})),l=c.changingMap,s=c.savingUri,u=(0,ee.i)(t.projectId,t.path),d=(0,i.useDispatch)(),f=(0,a.useCallback)((function(e){e.stopPropagation(),d(Ue.z.closeTab(t.key,n)),d(Je.x.clearFocus())}),[d,t,n]);return s&&s===u?o().createElement("div",{className:G()(Ye,r)},o().createElement(ve.Spinner,{size:ve.SpinnerSize.small})):l[u]?o().createElement("div",{className:G()(Ye,r)},o().createElement("div",{className:Xe})):o().createElement("div",{className:G()(Ye,r)},o().createElement(ve.FontIcon,{iconName:"cancel",onClick:f}))}function et(e){var t=e.activeTab,n=e.tabs,r=e.groupActive,c=e.groupKey,l=e.groupIndex,s=(0,i.useDispatch)(),u=(0,a.useCallback)((function(e,n){e.stopPropagation(),t&&t.key===n.key||s(he.zM.activeTab(n.key,c))}),[t,s,c]),d=(0,a.useCallback)((function(e,t){e.stopPropagation(),e.dataTransfer.setData("type","tab"),e.dataTransfer.setData("index","".concat(t)),e.dataTransfer.setData("groupIndex","".concat(l))}),[l]),f=(0,a.useCallback)((function(e,t){Ve(e,(function(e){if(e.dataTransfer){var n=e.dataTransfer.getData("type");if("file"===n)qe(e,s,c,t);else if("tab"===n){var r=e.dataTransfer.getData("groupIndex"),a=e.dataTransfer.getData("index");if(r!=="".concat(l)||a!=="".concat(t)){var o=parseInt(a),i=parseInt(r);s(he.zM.moveTab(i,l,o,t))}}else"folder"===n&&He(e)}}))}),[s,l,c]),m=function(e){var t=(0,i.useDispatch)();return(0,a.useCallback)((function(n,r){n.preventDefault(),Ce({x:n.clientX+15,y:n.clientY+5},we,(function(n){if(n)switch(n.key){case"close":t(he.zM.closeTab(r.key,e));break;case"closeGroup":t(he.zM.closeGroup(e));break;case"closeAll":t(he.zM.closeAll())}}))}),[t,e])}(c);return o().createElement(ve.Stack,{className:Ie,styles:Me,horizontal:!0},o().createElement("div",{className:Ze},n.map((function(e,n){var r=t&&e.key===t.key,a=e.readOnly||!1;return o().createElement("div",{key:e.key,"data-name":e.title,className:G()(Oe,r?Ae:"","icon"),onClick:function(t){return u(t,e)},onContextMenu:function(t){return m(t,e)},draggable:!0,onDragStart:function(e){return d(e,n)},onDragEnter:function(e){return f(e,n)},onDragOver:je},o().createElement("div",{className:Se},e.title,"preview"===e.type?"(preview)":""),a&&o().createElement("div",{className:Le},"(readOnly)"),o().createElement($e,{className:De,tab:e,groupKey:c}))})),o().createElement("div",{className:Pe,onDragEnter:function(e){return f(e,n.length,c)},onDragOver:je})),r&&o().createElement(Re,{groupKey:c,activeTab:t}))}var tt="KRdhhp66FMTy_G96yH351",nt="_2qoaN6yW10Q7PIg8Gt4KEO",rt="d0nEIrrbl_0DIkvWCJXGh",at="muE4UBs8j5-2kVHuJkWR8",ot=n(24656),it=n(94832),ct=(0,P.l6)(P.Zq.ALL_BACKGROUND),lt=(0,P.l6)(P.Zq.FONT_LEVEL_TWO);function st(e){var t=e.activeTab,n=(0,a.useMemo)((function(){return t&&"file"===t.type?(t.path||"").split(it.C_).reduce((function(e,t){var n="";e.length&&(n=e[e.length-1].key);var r={text:t,key:n?"".concat(n).concat(it.C_).concat(t):t};return[].concat((0,W.Z)(e),[r])}),[]):[]}),[t]);return 0===n.length?null:o().createElement("div",{className:tt,style:{backgroundColor:ct,color:lt}},o().createElement("div",{className:nt},n.map((function(e,t){var r=n.length-1;return o().createElement(o().Fragment,{key:e.key},o().createElement("div",{className:G()(rt,r===t?"icon":""),"data-name":e.text},o().createElement("span",{className:at},e.text)),r!==t&&o().createElement(ot.xu,{iconName:"ChevronRightMed"}))}))))}var ut="w5ceCreHDmKG_V7qJIsZT",dt=function(e){var t=e.visibile,n=void 0!==t&&t;return o().createElement("div",{className:!n&&ut})},ft=n(6006),mt=n(59810),pt=n.n(mt),ht="_3IOy_MtJad0kh2WfR3Ydhk",vt=n(82110),gt=new ft.Converter({extensions:[pt()({})],openLinksInNewWindow:!0});function yt(e){var t=e.tab,n=(0,a.useState)(""),i=(0,r.Z)(n,2),c=i[0],l=i[1],s=(0,a.useMemo)((function(){return t.projectId&&t.path?(0,ee.i)(t.projectId,t.path):""}),[t.projectId,t.path]);return(0,a.useEffect)((function(){s&&$.Z.readFileString(s).then((function(e){l(gt.makeHtml(e||""))})).catch((function(e){C.Z.handleErrorSingle("Error while preview html: ".concat(e.message))}))}),[s]),(0,a.useEffect)((function(){var e=$.Z.onFileContentChange((function(e){e.uri===s&&$.Z.readFileString(s).then((function(e){l(gt.makeHtml(e||""))})).catch((function(){}))}));return function(){e.dispose()}}),[s]),o().createElement(vt.X,null,o().createElement("div",{className:ht,dangerouslySetInnerHTML:{__html:c}}))}function Et(){var e=(0,a.useState)((function(){return h.welcomePage})),t=(0,r.Z)(e,1)[0];return t&&t()}var kt="_1bkcGGq8cSCqVqjsvbVGE0",bt="_32Wobq0nmzkvC2XRDdF6xK",Ct="_2enBz7E0klv8OCVPFFfTuQ",wt="_2KOOXMc9V8c8pQpcgD3CKV",xt=/[/"'=-\w\s]*/.source,Nt=/[\w\W\s\S|(\r\n)]*?/.source;function Tt(){return(Tt=(0,Z.Z)(I().mark((function e(t){var n,r,a,o,i,c,l,s,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Pt,e.next=3,Vt(t);case 3:return e.t1=e.sent,n=(0,e.t0)(e.t1),r=Ft(n),e.next=8,St(t,r);case 8:return a=e.sent,o=Ut(n),e.next=12,At(t,o);case 12:return i=e.sent,c=jt(n),e.next=16,_t(t,c);case 16:return l=e.sent,s=Ot(n,[].concat((0,W.Z)(a),(0,W.Z)(i),(0,W.Z)(l))),u=[].concat((0,W.Z)(r),(0,W.Z)(o)).map((function(e){return Kt(t,e.url)})),e.abrupt("return",{dependLinks:u,content:It(s)});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function It(e){var t=e.indexOf("<script");return t>-1?"".concat(e.substr(0,t)).concat("\n<script>\n  window.ethereum = window.parent.ethereum;\n  // Save the current console log function in case we need it.\n  var _log = console.log;\n  // Override the console\n  console.log = function(...rest) {\n    var args = JSON.parse(JSON.stringify(rest));\n    window.parent.postMessage(\n      {\n        source: 'preview-iframe',\n        level: 'info',\n        data: args\n      },\n      '*'\n    );\n    // Finally applying the console statements to saved instance earlier\n    _log.apply(console, arguments);\n  };\n  window.onerror = function(msg, url, lineNo, columnNo, error) {\n    var string = msg.toLowerCase();\n    var substring = \"script error\";\n    if (string.indexOf(substring) > -1){\n      window.parent.postMessage(\n        {\n          source: 'preview-iframe',\n          level: 'error',\n          data: {msg: 'Script Error: See Browser Console for Detail'}\n        },\n        '*'\n      );\n    } else {\n      window.parent.postMessage(\n        {\n          source: 'preview-iframe',\n          level: 'error',\n          data: {msg:msg, url: url, lineNo: lineNo, columnNo: columnNo, stack: error.stack}\n        },\n        '*'\n      );\n    }\n    return false;\n  }\n<\/script>\n").concat(e.substr(t)):e}var Zt=new RegExp("\x3c!--".concat(Nt,"--\x3e"),"ig");function Pt(e){return e.replace(Zt,"")}new RegExp("/\\*".concat(Nt,"\\*/"),"ig"),new RegExp("//".concat(Nt,"[\r\n(\r\n)]"),"ig");function Ot(e,t){var n,r=e,a=(0,ce.Z)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,i=r.split(o.source);2===i.length&&(r="".concat(i[0]).concat(o.content).concat(i[1]))}}catch(c){a.e(c)}finally{a.f()}return r}function St(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,Z.Z)(I().mark((function e(t,n){var r,a,o,i,c,l;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=(0,ce.Z)(n),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=13;break}return i=o.value,c=Kt(t,i.url),e.next=9,Vt(c);case 9:l=e.sent,r.push((0,S.Z)((0,S.Z)({},i),{},{content:"<script>".concat(l,"<\/script>")}));case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})))).apply(this,arguments)}function At(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,Z.Z)(I().mark((function e(t,n){var r,a,o,i,c,l;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=(0,ce.Z)(n),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=13;break}return i=o.value,c=Kt(t,i.url),e.next=9,Vt(c);case 9:l=e.sent,r.push((0,S.Z)((0,S.Z)({},i),{},{content:"<style>".concat(l,"</style>")}));case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})))).apply(this,arguments)}function _t(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,Z.Z)(I().mark((function e(t,n){var r,a,o,i,c,l;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=(0,ce.Z)(n),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=13;break}return i=o.value,c=Kt(t,i.url),e.next=9,Gt(c);case 9:l=e.sent,r.push((0,S.Z)((0,S.Z)({},i),{},{content:l}));case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})))).apply(this,arguments)}var Mt=new RegExp("<script".concat(xt,"src=(['\"])(.+?)\\1").concat(xt,">(?:").concat(Nt,"<\/script>)?"),"ig");function Ft(e){for(var t,n=[];t=Mt.exec(e);){var r=t[2].trim();!r||r.startsWith("http://")||r.startsWith("https://")||n.push({source:t[0],url:t[2]})}return n}var Bt=new RegExp("<link".concat(xt,'href=([\'"])([^"]+.css)\\1').concat(xt,">"),"ig");function Ut(e){for(var t,n=[];t=Bt.exec(e);){var r=t[2].trim();!r||r.startsWith("http://")||r.startsWith("https://")||n.push({source:t[0],url:t[2]})}return n}var zt=new RegExp("<img".concat(xt,'src=([\'"])([^"]+)\\1').concat(xt,">"),"ig");function jt(e){for(var t,n=[];t=zt.exec(e);){var r=t[2].trim();!r||r.startsWith("http://")||r.startsWith("https://")||n.push({source:r,url:t[2]})}return n}function Vt(e){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,Z.Z)(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.Z.readFileString(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,Z.Z)(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.Z.readFile(t);case 3:return n=e.sent,r=window.URL.createObjectURL(n),e.abrupt("return",r||"");case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Kt(e,t){var n=e.split(it.C_),r=t.split(it.C_);n.pop();var a,o=(0,ce.Z)(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;"."!==i&&(".."===i?n.pop():n.push(i))}}catch(c){o.e(c)}finally{o.f()}return n.join(it.C_)}var Qt,qt,Jt=n(29834);function Yt(e){return JSON.parse(JSON.stringify(e))}!function(e){e[e.ADD=0]="ADD",e[e.CLEAR=1]="CLEAR"}(Qt||(Qt={})),function(e){e.INFO="info",e.WARNING="warning",e.ERROR="error",e.DEBUG="debug"}(qt||(qt={}));var Xt=new(function(){function e(){(0,f.Z)(this,e),this._consoleDidChange=new p.Emitter,this.onConsoleChange=void 0,this.logList=[],this.onConsoleChange=this._consoleDidChange.event}return(0,m.Z)(e,[{key:"logs",value:function(){return Yt(this.logList)}},{key:"addLog",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r={level:e,message:t,detail:n};this.logList.push(r),this._consoleDidChange.fire({type:Qt.ADD,data:{log:Yt(r),logs:Yt(this.logList)}})}},{key:"clearLog",value:function(){this.logList=[],this._consoleDidChange.fire({type:Qt.CLEAR})}}]),e}()),$t={};function en(e){var t=e.tab,n=(0,a.useState)(""),c=(0,r.Z)(n,2),l=c[0],s=c[1],u=(0,i.useDispatch)(),d=(0,a.useCallback)((function(){if(t.projectId&&t.path){var e=(0,ee.i)(t.projectId,t.path);s(""),Xt.clearLog(),u(he.He.openPane(he.IV.CONSOLE)),function(e){return Tt.apply(this,arguments)}(e).then((function(t){var n=t.content,r=t.dependLinks;s(n),$t[e]=r})).catch((function(e){Xt.addLog(qt.ERROR,"Error while preview html: ".concat(e.message))}))}}),[t,u]);return(0,a.useEffect)((function(){d()}),[d]),(0,a.useEffect)((function(){var e=function(e){if(e.data&&"preview-iframe"===e.data.source){var t=e.data,n=t.level,r=t.data;if("info"===n){var a,o=(0,ce.Z)(r);try{for(o.s();!(a=o.n()).done;){var i=a.value,c=Object.prototype.toString.call(i);"[object Object]"===c?Xt.addLog(qt.INFO,JSON.stringify(i),JSON.stringify(i,null,4)):"[object Array]"===c?Xt.addLog(qt.INFO,JSON.stringify(i)):Xt.addLog(qt.INFO,i)}}catch(f){o.e(f)}finally{o.f()}}else if("error"===n){var l=r.msg,s=r.lineNo,u=r.stack;if(u&&u.indexOf("srcdoc:")>-1&&s){var d=s-50;u=u.replace("srcdoc:".concat(s,":"),"srcdoc:".concat(d,":"))}Xt.addLog(qt.ERROR,l,u)}}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[]),o().createElement("div",{className:Ct},o().createElement(ve.Stack,{styles:{root:{width:"100%",height:"100%"}}},o().createElement(ve.StackItem,null,o().createElement("div",{className:wt},o().createElement(ve.StackItem,{grow:!0},o().createElement(Jt.II,{value:t.path,disabled:!0,readOnly:!0})),o().createElement(ve.StackItem,null,o().createElement(Jt.zx,{type:Jt.L$.ICON_BUTTON,iconProps:{iconName:"Refresh"},onClick:d})))),o().createElement(ve.StackItem,{grow:!0},o().createElement("iframe",{sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts allow-downloads",srcDoc:l,width:"100%",height:"100%"}))))}var tn="_1Z6dxQuQZ-ENYhKbv2Uu4e";function nn(e){var t=e.tab,n=(0,a.useState)(""),i=(0,r.Z)(n,2),c=i[0],l=i[1],s=(0,a.useState)(!0),u=(0,r.Z)(s,2),d=u[0],f=u[1];return(0,a.useEffect)((function(){t.projectId&&t.path&&$.Z.readFile((0,ee.i)(t.projectId,t.path)).then((function(e){e&&l(window.URL.createObjectURL(e))})).catch((function(e){C.Z.handleErrorSingle("Error while fetch file ".concat(e.message))})).finally((function(){f(!1)}))}),[t]),o().createElement("div",{className:tn},c&&o().createElement("img",{src:c,alt:t.path}),d&&o().createElement(te.L,null))}function rn(e){var t=e.tabs,n=e.active,r=e.groupKey,c=e.groupIndex,l=e.activeTabKey,s=(0,a.useMemo)((function(){return l?t.filter((function(e){return e.key===l}))[0]:t[0]}),[l,t]),u=(0,i.useDispatch)(),d=(0,a.useCallback)((function(){n||(u(he.zM.activeGroup(r)),(0,_.Kz)({eventType:"CAPTURE_BUTTON",action:_.A3.click}))}),[u,n,r]),f=(0,a.useCallback)((function(e){Ve(e,(function(e){if(e.dataTransfer){var t=e.dataTransfer.getData("type");"file"===t?qe(e,u,r):"folder"===t&&He(e)}}))}),[u,r]);return o().createElement("div",{className:kt},o().createElement(et,{tabs:t,activeTab:s,groupActive:n,groupKey:r,groupIndex:c}),o().createElement(st,{activeTab:s}),o().createElement("div",{className:bt,onClickCapture:d,onDragOver:je,onDragEnter:f},s&&"file"===s.type&&function(e,t){if((0,ee.Or)(t.path))return o().createElement(nn,{groupKey:e,tab:t});return o().createElement(pe,{groupKey:e,tab:t})}(r,s),s&&"preview"===s.type&&(0,ee.xq)(s.path)&&o().createElement(yt,{groupKey:r,tab:s}),s&&"preview"===s.type&&(0,ee.Pc)(s.path)&&o().createElement(en,{groupKey:r,tab:s}),o().createElement(dt,{visibile:!(!s||"plugin"!==s.type),activedKey:s&&s.key||""}),s&&"welcome"===s.type&&o().createElement(Et,null)))}var an="fcDLUrY6vF3PMQtjvwEji",on="_1ij9btsXqd6PKOkrJNU5ZI",cn="_3X8Mt-8VQziAbOu3EsivC-",ln="_2D883EfDRQw5YGLAWR9rGe",sn=n(3433),un=n(88153),dn=n.n(un);function fn(){return o().createElement("img",{src:dn()})}function mn(e,t,n,r,a){var i=G()([(0,j.Z)({},on,!0===n),(0,j.Z)({},cn,!1===n)]);if(1===e.length){var c=e[0],l=c.tabs,s=c.groupKey,u=c.activeTabKey;return o().createElement(rn,{tabs:l,activeTabKey:u,groupKey:s,groupIndex:0,active:s===t,key:s})}var d=(100/e.flat(1/0).length).toFixed(2);return o().createElement(V.Z,{size:"".concat(d,"%"),onDragStarted:r,onDragFinished:a},e.map((function(e,c){var l=e.tabs,s=e.groupKey,u=e.activeTabKey;return e.length?mn(e,t,n,r,a):o().createElement("div",{key:e.groupKey,className:i},o().createElement(rn,{tabs:l,activeTabKey:u,groupKey:s,groupIndex:c,active:s===t}))})))}function pn(){var e=(0,a.useState)(!1),t=(0,r.Z)(e,2),n=t[0],i=t[1],c=(0,sn.Z)().tabGroups,l=c.groups,s=c.activeGroupKey;if(0===l.length)return o().createElement("div",{className:an},o().createElement("div",{className:ln},o().createElement(fn,null)));var u=function(e){var t=(0,W.Z)(e);function n(e){return e.splice(0,1),e.length>2&&n(e),e}for(;t.length>2;){var r=n((0,W.Z)(t));t.pop(),t[t.length-1]=r}return t}(l);return o().createElement("div",{className:an},mn(u,s,n,(function(){return i(!0)}),(function(){return i(!1)})))}var hn="erTFSeYJkn5dFa6vuVgMP",vn=n(88207),gn=n(24500),yn="_1bhnB6FRqF3vxenH3z25oE";function En(){return(0,i.useSelector)((function(e){return e.explorer}))}function kn(e){return e.collapse?o().createElement(ot.xu,{iconName:"ChevronRight"}):o().createElement(ot.xu,{iconName:"ChevronDown"})}function bn(e){var t=e.loading,n=void 0!==t&&t,r=e.collapse,a=e.pluginFolder;return n?o().createElement(ve.Spinner,{size:ve.SpinnerSize.xSmall}):a?o().createElement(ot.xu,{iconName:"FolderQuery"}):r?o().createElement(ot.xu,{iconName:"FabricFolder"}):o().createElement(ot.xu,{iconName:"FabricOpenFolderHorizontal"})}var Cn=n(61536),wn=20,xn=32,Nn=[{key:"cut",text:"Cut"},{key:"copy",text:"Copy"},{key:"divider_1",itemType:Cn.n.Divider},{key:"rename",text:"Rename"},{key:"delete",text:"Delete Permanently"},{key:"divider_2",itemType:Cn.n.Divider},{key:"download",text:"Download"}],Tn=[{key:"newFile",text:"New File"},{key:"newFolder",text:"New Folder"},{key:"divider_1",itemType:Cn.n.Divider},{key:"cut",text:"Cut"},{key:"copy",text:"Copy"},{key:"divider_2",itemType:Cn.n.Divider},{key:"rename",text:"Rename"},{key:"delete",text:"Delete Permanently"},{key:"divider_3",itemType:Cn.n.Divider},{key:"download",text:"Download"}],In=[{key:"newFile",text:"New File"},{key:"newFolder",text:"New Folder"},{key:"divider_1",itemType:Cn.n.Divider},{key:"cut",text:"Cut"},{key:"copy",text:"Copy"},{key:"paste",text:"Paste"},{key:"divider_2",itemType:Cn.n.Divider},{key:"rename",text:"Rename"},{key:"delete",text:"Delete Permanently"},{key:"divider_3",itemType:Cn.n.Divider},{key:"download",text:"Download"}],Zn=[{key:"newFile",text:"New File"},{key:"newFolder",text:"New Folder"},{key:"download",text:"Download"}],Pn=(Cn.n.Divider,n(4716)),On=n(27502),Sn=n(6493),Ln=["png","gif","jpeg","webp","txt","sol","md","compiled","source","deployed","json","txt","js","css","html","go","sum","mod","mo"],An=new(function(){function e(){(0,f.Z)(this,e),this.supportedExtensions=new Set(Ln)}return(0,m.Z)(e,[{key:"register",value:function(e){e&&this.supportedExtensions.add(e)}},{key:"remove",value:function(e){e&&!Ln.includes(e)&&this.supportedExtensions.delete(e)}},{key:"list",value:function(){return(0,W.Z)(this.supportedExtensions)}},{key:"validate",value:function(e){return{result:!0,extensions:(0,W.Z)(this.supportedExtensions)}}}]),e}()),Dn=n(64695);n(48764).Buffer;function _n(e,t,n,r){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,Z.Z)(I().mark((function e(t,n,r,a){var o,i,c,l,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={filesTotal:n.length,filesUploaded:0,startTime:Date.now(),bytesUploaded:0,haveErrorSkipped:!1,addedFilePaths:[],replacedFilePaths:[]},i={overwrite:!1},c=(0,ce.Z)(n),e.prev=3,c.s();case 5:if((l=c.n()).done){e.next=11;break}return s=l.value,e.next=9,Mn(t,s,r,o,i,a);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),c.e(e.t0);case 16:return e.prev=16,c.f(),e.finish(16);case 19:if(!o.haveErrorSkipped){e.next=21;break}throw new Error("some file not uploaded");case 21:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})))).apply(this,arguments)}function Mn(e,t,n,r,a,o){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,Z.Z)(I().mark((function e(t,n,r,a,o,i){var c,l,s,u,d;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.name&&(n.isFile||n.isDirectory)){e.next=2;break}return e.abrupt("return",void 0);case 2:if(c=0,l=function(e,t,n){c+=t,a.bytesUploaded+=t;var r=a.bytesUploaded/((Date.now()-a.startTime)/1e3),o=(0,ee.NC)("uploadProgress","{0} of {1} files uploaded ({2}/s)",a.filesUploaded,a.filesTotal,ee.R7.formatSize(r));o=e<=ee.R7.MB?(0,ee.NC)("uploadProgressDetail","{0} {1}",o,n):(0,ee.NC)("uploadProgressDetail","{0} ({1} of {2}, {3}/s), {4}",o,ee.R7.formatSize(c),ee.R7.formatSize(e),ee.R7.formatSize(r),n),C.Z.handleInfo([{source:w.O3.ALL,msg:o}])},a.filesUploaded++,s="".concat(r).concat(it.C_).concat(n.name),!n.isFile){e.next=22;break}return e.next=9,new Promise((function(e,t){return n.file(e,t)}));case 9:return u=e.sent,e.prev=10,e.next=13,Bn(t,s,u,l);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(10),a.haveErrorSkipped=!0,C.Z.handleWarn([{source:w.O3.ALL,msg:"Error while upload file: ".concat(e.t0.message)}]);case 19:return e.abrupt("return",{isFile:!0,path:s});case 22:return e.delegateYield(I().mark((function e(){var r,c,l,u,d,f,m;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.createReader(),c=[],l=!1;case 3:return e.next=5,new Promise((function(e,t){return r.readEntries(e,t)}));case 5:(u=e.sent).length>0?c.push.apply(c,(0,W.Z)(u)):l=!0;case 7:if(!l){e.next=3;break}case 8:a.filesTotal+=c.length,d=0,f=c;case 10:if(!(d<f.length)){e.next=17;break}return m=f[d],e.next=14,Mn(t,m,s,a,o,i);case 14:d++,e.next=10;break;case 17:return e.abrupt("return",{v:{isFile:!1,path:s}});case 18:case"end":return e.stop()}}),e)}))(),"t1",23);case 23:if(d=e.t1,"object"!==(0,Sn.Z)(d)){e.next=26;break}return e.abrupt("return",d.v);case 26:case"end":return e.stop()}}),e,null,[[10,15]])})))).apply(this,arguments)}function Bn(e,t,n,r){return Un.apply(this,arguments)}function Un(){return(Un=(0,Z.Z)(I().mark((function e(t,n,r,a){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var i=An.validate(r.name),c=i.result,l=i.extensions;if(c&&(0,ee.uV)(r)){var s=new FileReader;s.onload=function(){var i=(0,Z.Z)(I().mark((function i(c){var l;return I().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!c.currentTarget||!c.currentTarget.result){i.next=9;break}return l=c.currentTarget.result,i.next=5,$.Z.writeFile((0,ee.i)(t,n),r);case 5:a(r.size,l.byteLength,"path (".concat(n,")")),e(l),i.next=10;break;case 9:throw new Error("Could not read from dropped file.");case 10:i.next=15;break;case 12:i.prev=12,i.t0=i.catch(0),o(i.t0);case 15:case"end":return i.stop()}}),i,null,[[0,12]])})));return function(e){return i.apply(this,arguments)}}(),s.readAsArrayBuffer(r)}else o(new Error("file (".concat(r.name,") not support, supported extensions (").concat(l.join("/"),")")))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zn=function(e){var t=e.file,n=(0,k.e)().currentProjectId,c=En(),l=c.focus,s=c.pasteSourceItem,u=c.expandMap,d=c.draggingFocusPath,f=c.loadingPath,m=t.level,p=(0,a.useMemo)((function(){return new Array(m).fill(wn)}),[m]),h=(0,a.useMemo)((function(){return"".concat(xn+wn*m,"px")}),[m]),v=(0,i.useDispatch)(),g=function(e,t){return(0,a.useCallback)((function(n,r,a){var o=Tn;e&&(o=In),Ce({x:n.clientX+15,y:n.clientY+5},o,(function(n){if(n)switch(n.key){case"newFile":t(Pn.an.createFile(a,r.path));break;case"newFolder":t(Pn.an.createFolder(a,r.path));break;case"cut":t(Pn.an.cut(a,r.path));break;case"copy":t(Pn.an.copy(a,r.path));break;case"paste":e&&(t(Pn.an.clearPaste()),t(Je.x.setLoadingPath(r.path)),(0,ee.Qo)(e,a,r.path).then((function(e){t(Je.x.focus(e))})).finally((function(){t(Je.x.setLoadingPath(null))})));break;case"rename":t(Pn.an.rename(a,r.path));break;case"delete":(0,On.VG)("Are you sure you want to permanently delete folder *".concat(r.name,"* and its contents?"),"This action is irreversible!",{okText:"Delete",onOk:function(){r.children&&Object.keys(r.children).length?(t(Je.x.setLoadingPath(r.path)),$.Z.delete((0,ee.i)(a,r.path)).catch((function(e){C.Z.handleErrorSingle("Error while delete file: ".concat(e.message))})).finally((function(){t(Je.x.setLoadingPath(null))}))):(t(Je.x.deletePath(r.path)),$.Z.delete((0,ee.i)(a,r.path)).catch((function(e){t(Je.x.deletePathRevoke(r.path)),C.Z.handleErrorSingle("Error while delete file: ".concat(e.message))})))}});break;case"download":$.Z.download((0,ee.i)(a,r.path),r.name)}}))}),[e,t])}(s,v),y=(0,a.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),n&&(l!==t.path&&v(Je.x.focus(t.path)),g(e,t,n))}),[n,l,t,g,v]),E=(0,a.useCallback)((function(e){e.stopPropagation(),n&&v(Je.x.toggleExpandAndFocus(n,t.path)),(0,_.Kz)({eventType:"FLOADER_MOUSEEVENT",action:_.A3.click,extra:{fileName:t.name}})}),[t.path,n,v,t.name]),b=(0,a.useMemo)((function(){return G()("list-row folder",l===t.path?"focus":"",d&&t.path.startsWith(d)?"draggingFocus":"")}),[d,t.path,l]),w=(0,a.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",n&&v(Je.x.expand(n,t.path));var a=Ke(e);if(null!==a){var o=(0,ee.hl)(a);(0,r.Z)(o,1)[0]!==t.path&&v(Je.x.setDraggingFocusPath(t.path))}else v(Je.x.setDraggingFocusPath(t.path))}),[n,v,t.path]),x=(0,a.useCallback)((function(e){if(e.preventDefault(),e.stopPropagation(),v(Je.x.setDraggingFocusPath(null)),n){var a=e.dataTransfer.getData("type"),o=Qe(e).path;if("file"===a&&o){var i=(0,ee.hl)(o);(0,r.Z)(i,1)[0]!==o&&jn(v,t,o,n)}else"folder"===a&&o?t.path!==o&&jn(v,t,o,n):e.dataTransfer.files&&e.dataTransfer.files.length&&function(e,t,n,r){var a,o=e.dataTransfer.items,i=[],c=(0,ce.Z)(o);try{for(c.s();!(a=c.n()).done;){var l=a.value;i.push(l.webkitGetAsEntry())}}catch(s){c.e(s)}finally{c.f()}t(Je.x.setLoadingPath(n.path)),_n(r,i,n.path,t).then((function(){C.Z.handleInfoSingle("upload success!")})).catch((function(e){C.Z.handleErrorSingle("Error while uploading file: ".concat(e.message))})).finally((function(){t(Je.x.setLoadingPath(null))}))}(e,v,t,n)}}),[n,v,t]),N=(0,a.useCallback)((function(e){e.stopPropagation(),ze(e,t.name,"drag-image"),e.dataTransfer.setData("type","folder"),We(e,t.path,t.path)}),[t]),T=(0,a.useCallback)((function(){v(Je.x.setDraggingFocusPath(null))}),[v]),I=!(u&&u[t.path]);return o().createElement("div",{className:b,onClick:E,onContextMenu:y,title:t.name,draggable:!0,onDragStart:N,onDragEnter:w,onDragOver:je,onDrop:x,onDragEnd:T},o().createElement("div",{className:"inner"},o().createElement("div",{className:"indent",style:{width:h}},p.map((function(e,t){return o().createElement("div",{key:t,className:"indent-guide",style:{width:"".concat(wn,"px")}})}))),o().createElement("div",{className:"twisted",style:{paddingLeft:h}},o().createElement(kn,{collapse:I}),o().createElement(bn,{loading:f===t.path,collapse:I,pluginFolder:t.name===it.E2})),o().createElement("div",{className:"label icon-file-directory","data-name":t.name},o().createElement("span",{className:"labelContent"},t.name))))};function jn(e,t,n,r){e(Je.x.setLoadingPath(t.path)),(0,ee.wj)(n,r,t.path).then((function(t){e(Je.x.focus(t))})).catch((function(e){C.Z.handleErrorSingle("Error while moving file: ".concat(e.message))})).finally((function(){e(Je.x.setLoadingPath(null))}))}var Vn=n(98408);var Hn=function(e){var t=e.file,n=(0,k.e)(),c=n.currentProject,l=n.currentProjectId,s=En(),u=s.focus,d=s.pasteSourceItem,f=s.draggingFocusPath,m=s.loadingPath,p=(0,Vn.X)(),h=t.level,v=(0,a.useMemo)((function(){return new Array(h).fill(wn)}),[h]),g=(0,a.useMemo)((function(){return"".concat(xn+wn*h,"px")}),[h]),y=(0,i.useDispatch)(),E=function(e){return(0,a.useCallback)((function(t,n,r){Ce({x:t.clientX+15,y:t.clientY+5},Nn,(function(t){if(t)switch(t.key){case"cut":e(Pn.an.cut(r,n.path));break;case"copy":e(Pn.an.copy(r,n.path));break;case"rename":e(Pn.an.rename(r,n.path));break;case"delete":(0,On.VG)("Are you sure you want to permanently delete file *".concat(n.name,"* and its contents?"),"This action is irreversible!",{okText:"Delete",onOk:function(){e(Je.x.deletePath(n.path)),$.Z.delete((0,ee.i)(r,n.path)).catch((function(t){e(Je.x.deletePathRevoke(n.path)),C.Z.handleErrorSingle("Error while delete file: ".concat(t.message))}))}});break;case"download":$.Z.download((0,ee.i)(r,n.path),n.name)}}))}),[e])}(y),b=(0,a.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),c&&c.id&&(u!==t.path&&y(Je.x.focus(t.path)),E(e,t,c.id))}),[c,t,E,u,y]),w=(0,a.useCallback)((function(e){e.stopPropagation(),l&&(y(Je.x.openAndFocus(l,t.path)),(0,_.Kz)({eventType:"FILE_MOUSEEVENT",action:_.A3.click,extra:{path:t.path}}))}),[t,l,y]),x=(0,a.useMemo)((function(){var e=u===t.path,n=d&&d.path===t.path?d.type===Pn.lG.COPY?"copy-source":"cut-source":"",r=p===t.path?"active":"";return G()("list-row file",e?"focus":"",n,r,f&&t.path.startsWith(f)?"draggingFocus":"")}),[u,t.path,d,p,f]),N=(0,a.useCallback)((function(e){!function(e){e.stopPropagation()}(e),l&&(ze(e,t.name,"drag-image"),e.dataTransfer.setData("type","file"),We(e,l,t.path))}),[l,t.name,t.path]),T=(0,a.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move";var n=(0,ee.hl)(t.path),a=(0,r.Z)(n,1)[0],o=Ke(e);if(null!==o){var i=(0,ee.hl)(o);(0,r.Z)(i,1)[0]!==a&&y(Je.x.setDraggingFocusPath(a))}else y(Je.x.setDraggingFocusPath(a))}),[y,t.path]),I=(0,a.useCallback)((function(e){if(e.preventDefault(),e.stopPropagation(),y(Je.x.setDraggingFocusPath(null)),l){var n=e.dataTransfer.getData("type"),a=Qe(e).path;if("file"===n&&a){var o=(0,ee.hl)(t.path),i=(0,r.Z)(o,1)[0],c=(0,ee.hl)(a);(0,r.Z)(c,1)[0]!==i&&Gn(y,i,a,l)}else if("folder"===n&&a){var s=(0,ee.hl)(t.path),u=(0,r.Z)(s,1)[0];u!==a&&Gn(y,u,a,l)}else e.dataTransfer.files&&e.dataTransfer.files.length&&function(e,t,n,a){var o,i=e.dataTransfer.items,c=[],l=(0,ce.Z)(i);try{for(l.s();!(o=l.n()).done;){var s=o.value;c.push(s.webkitGetAsEntry())}}catch(f){l.e(f)}finally{l.f()}var u=(0,ee.hl)(t.path),d=(0,r.Z)(u,1)[0];n(Je.x.setLoadingPath(d)),_n(a,c,d,n).then((function(){C.Z.handleInfoSingle("upload success!")})).catch((function(e){C.Z.handleErrorSingle("Error while uploading file: ".concat(e.message))})).finally((function(){n(Je.x.setLoadingPath(null))}))}(e,t,y,l)}}),[l,y,t]),Z=(0,a.useCallback)((function(){y(Je.x.setDraggingFocusPath(null))}),[y]);return o().createElement("div",{className:x,onClick:w,onContextMenu:b,title:t.name,draggable:!0,onDragStart:N,onDragEnter:T,onDragOver:je,onDrop:I,onDragEnd:Z},o().createElement("div",{className:"inner"},o().createElement("div",{className:"indent",style:{width:g}},v.map((function(e,t){return o().createElement("div",{key:t,className:"indent-guide",style:{width:"".concat(wn,"px")}})}))),o().createElement("div",{className:"twisted",style:{paddingLeft:g}},m===t.path&&o().createElement(ve.Spinner,{size:ve.SpinnerSize.xSmall})),o().createElement("div",{className:"label icon","data-name":t.name},o().createElement("span",{className:"labelContent"},t.name))))};function Gn(e,t,n,r){e(Je.x.setLoadingPath(t)),(0,ee.wj)(n,r,t).then((function(t){e(Je.x.focus(t))})).catch((function(e){C.Z.handleErrorSingle("Error while moving file: ".concat(e.message))})).finally((function(){e(Je.x.setLoadingPath(null))}))}function Wn(e,t){if(!e||!t)return e;var n=t.length;if(0===n||0===e.length)return e;for(var r=0;e.indexOf(t,r)===r;)r+=n;return e.substring(r)}function Kn(e,t){if(!e||!t)return e;var n=t.length,r=e.length;if(0===n||0===r)return e;for(var a=r,o=-1;-1!==(o=e.lastIndexOf(t,a-1))&&o+n===a;){if(0===o)return"";a=o}return e.substring(0,a)}function Qn(e,t){if(!(t=er(t))||0===t.length||/^\s+$/.test(t))return"A file name must be provided.";if(t.indexOf("/")>-1||t.indexOf("\\")>-1)return"A file name cannot contain a slash.";if(t.indexOf("#")>-1||t.indexOf("?")>-1||t.indexOf("=")>-1||t.indexOf("%")>-1||t.indexOf("&")>-1||t.indexOf("+")>-1)return'A file name cannot contain "#?=%&+"';if(e&&e[t])return"A file or folder **".concat(t,"** already exists at this location. Please choose a different name.");if(!$n(t))return"The name **".concat(t,"** is not valid as a file name. Please choose a different name.");if(/^\s|\s$/.test(t))return"Leading or trailing whitespace detected in file name.";var n=An.validate(t),r=n.result,a=n.extensions;return r?"":"Only support file extensions (".concat(a.join("/"),")")}function qn(e,t){return!(t=er(t))||0===t.length||/^\s+$/.test(t)?"A folder name must be provided.":t.indexOf("/")>-1||t.indexOf("\\")>-1?"A folder name cannot contain a slash.":t.indexOf("#")>-1||t.indexOf("?")>-1||t.indexOf("=")>-1||t.indexOf("%")>-1||t.indexOf("&")>-1||t.indexOf("+")>-1?'A folder name cannot contain "#?=%&+"':e&&e[t]?"A file or folder **".concat(t,"** already exists at this location. Please choose a different name."):$n(t)?/^\s|\s$/.test(t)?"Leading or trailing whitespace detected in folder name.":"":"The name **".concat(t,"** is not valid as a folder name. Please choose a different name.")}var Jn=/[\\/:\*\?"<>\|]/g,Yn=/[\\/]/g,Xn=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function $n(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?Jn:Yn;return!(!e||0===e.length||/^\s+$/.test(e))&&(n.lastIndex=0,!n.test(e)&&((!t||!Xn.test(e))&&("."!==e&&".."!==e&&((!t||"."!==e[e.length-1])&&((!t||e.length===e.trim().length)&&!(e.length>255))))))}function er(e){return e?(e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return Kn(Wn(e,t),t)}(e,"\t"),e=Kn(e,"."),e=Kn(e,"/"),e=Kn(e,"\\")):e}function tr(e){e.stopPropagation()}function nr(e){var t=e.parent,n=e.createItem,c=n.projectId,l=n.path,s=t.level,u=(t.path,t.children),d=s+1,f=(0,a.useMemo)((function(){return new Array(d).fill(wn)}),[d]),m=(0,a.useMemo)((function(){return"".concat(xn+wn*d,"px")}),[d]),p=(0,i.useDispatch)(),h=(0,a.useState)(""),v=(0,r.Z)(h,2),g=v[0],y=v[1],E=(0,a.useState)(""),k=(0,r.Z)(E,2),b=k[0],C=k[1],w=(0,a.useCallback)((function(e,t){var n=t||"";C(qn(u,n)),y(n)}),[u]),x=(0,a.useCallback)((function(){g&&!b&&p(Pn.an.doCreateFolder(c,l,g)),p(Pn.an.clearCreate())}),[g,b,p,c,l]),N=(0,a.useCallback)((function(){x()}),[x]),T=(0,a.useCallback)((function(e){13===e.nativeEvent.keyCode&&x()}),[x]);return o().createElement("div",{className:"list-row folder"},o().createElement("div",{className:"inner"},o().createElement("div",{className:"indent",style:{width:m}},f.map((function(e,t){return o().createElement("div",{key:t,className:"indent-guide",style:{width:"".concat(wn,"px")}})}))),o().createElement("div",{className:"twisted",style:{paddingLeft:m}},o().createElement(bn,{collapse:!0})),o().createElement("div",{className:"label edit icon-file-directory"},o().createElement(Jt.II,{className:"fileNameEditor",autoFocus:!0,value:g,autoComplete:"off",onClick:tr,onChange:w,onBlur:N,onKeyPress:T,errorMessage:b}))))}function rr(e){var t=e.parent,n=e.createItem,c=n.projectId,l=n.path,s=t.level,u=t.children,d=s+1,f=(0,a.useMemo)((function(){return new Array(d).fill(wn)}),[d]),m=(0,a.useMemo)((function(){return"".concat(xn+wn*d,"px")}),[d]),p=(0,i.useDispatch)(),h=(0,a.useState)(""),v=(0,r.Z)(h,2),g=v[0],y=v[1],E=(0,a.useState)(""),k=(0,r.Z)(E,2),b=k[0],C=k[1],w=(0,a.useCallback)((function(e,t){var n=t||"";C(Qn(u,n)),y(n)}),[u]),x=(0,a.useCallback)((function(){g&&c&&!b&&p(Pn.an.doCreateFile(c,l,g)),p(Pn.an.clearCreate())}),[g,c,b,p,l]),N=(0,a.useCallback)((function(){x()}),[x]),T=(0,a.useCallback)((function(e){13===e.nativeEvent.keyCode&&x()}),[x]);return o().createElement("div",{className:"list-row file"},o().createElement("div",{className:"inner"},o().createElement("div",{className:"indent",style:{width:m}},f.map((function(e,t){return o().createElement("div",{key:t,className:"indent-guide",style:{width:"".concat(wn,"px")}})}))),o().createElement("div",{className:"twisted",style:{paddingLeft:m}}),o().createElement("div",{className:"label edit icon","data-name":""},o().createElement(Jt.II,{className:"fileNameEditor",autoFocus:!0,value:g,autoComplete:"off",onClick:tr,onChange:w,onBlur:N,onKeyPress:T,errorMessage:b}))))}function ar(e){var t=e.node,n=e.renameItem,c=e.levelNames,l=e.expandMap,s=t.level,u=n.path,d=n.projectId,f=(0,ee.hl)(u),m=(0,r.Z)(f,2),p=(m[0],m[1]),h=(0,a.useMemo)((function(){return new Array(s).fill(wn)}),[s]),v=(0,a.useMemo)((function(){return"".concat(xn+wn*s,"px")}),[s]),g=(0,i.useDispatch)(),y=(0,a.useState)(""),E=(0,r.Z)(y,2),k=E[0],b=E[1],C=(0,a.useState)(p),w=(0,r.Z)(C,2),x=w[0],N=w[1],T=(0,a.useMemo)((function(){return c.reduce((function(e,t){return t!==p&&(e[t]=!0),e}),{})}),[c,p]),I=(0,a.useCallback)((function(e,t){var n=t||"";b(qn(T,n)),N(n)}),[T]),Z=(0,a.useCallback)((function(){x&&x!==p&&!k&&(g(Je.x.setLoadingPath(u)),(0,ee.PQ)(d,u,x).finally((function(){g(Je.x.setLoadingPath(null))}))),g(Pn.an.clearRename())}),[x,p,k,g,d,u]),P=(0,a.useCallback)((function(){Z()}),[Z]),O=(0,a.useCallback)((function(e){13===e.nativeEvent.keyCode&&Z()}),[Z]),S=!(l&&l[u]);return o().createElement("div",{className:"list-row folder"},o().createElement("div",{className:"inner"},o().createElement("div",{className:"indent",style:{width:v}},h.map((function(e,t){return o().createElement("div",{key:t,className:"indent-guide",style:{width:"".concat(wn,"px")}})}))),o().createElement("div",{className:"twisted",style:{paddingLeft:v}},o().createElement(bn,{collapse:S})),o().createElement("div",{className:"label edit icon-file-directory"},o().createElement(Jt.II,{className:"fileNameEditor",autoFocus:!0,value:x,autoComplete:"off",onClick:tr,onChange:I,onBlur:P,onKeyPress:O,errorMessage:k}))))}var or=(0,P.l6)(P.Zq.PRIMARY),ir=(0,P.l6)(P.Zq.UN_CHOOSE_BAR_BACKGROUND),cr=(0,P.l6)(P.Zq.FONT_LEVEL_ONE),lr=(0,P.l6)(P.Zq.UN_CHOOSE_BAR_BACKGROUND),sr=(0,P.l6)(P.Zq.FONT_LEVEL_THREE),ur={root:{color:(0,P.l6)(P.Zq.FONT_LEVEL_TWO),paddingBottom:"50px",selectors:{".list-row:hover":{backgroundColor:lr},".list-row.active":{backgroundColor:ir},".list-row.focus, .list-row.focus:hover":{backgroundColor:or,color:cr},".list-row.focus .label.icon:before, &.focus:hover .label.icon:before":{color:cr},"&:hover .indent-guide":{borderLeftColor:"".concat(sr," !important;")}}}};function dr(e){var t=e.node,n=e.renameItem,c=e.levelNames,l=t.level,s=n.path,u=n.projectId,d=(0,ee.hl)(s),f=(0,r.Z)(d,2),m=(f[0],f[1]),p=(0,a.useMemo)((function(){return new Array(l).fill(wn)}),[l]),h=(0,a.useMemo)((function(){return"".concat(xn+wn*l,"px")}),[l]),v=(0,i.useDispatch)(),g=(0,a.useState)(m),y=(0,r.Z)(g,2),E=y[0],k=y[1],b=(0,a.useState)(""),w=(0,r.Z)(b,2),x=w[0],N=w[1],T=(0,a.useMemo)((function(){return c.reduce((function(e,t){return t!==m&&(e[t]=!0),e}),{})}),[c,m]),I=(0,a.useCallback)((function(e,t){var n=t||"";N(Qn(T,n)),k(n)}),[T]),Z=(0,a.useCallback)((function(){E&&E!==m&&!x&&(v(Je.x.renamePath(s,E)),(0,ee.PQ)(u,s,E).then((function(){})).catch((function(e){C.Z.handleErrorSingle("Error while rename file: ".concat(e.message)),v(Je.x.renamePathRevoke(s,E))}))),v(Pn.an.clearRename())}),[E,m,x,v,u,s]),P=(0,a.useCallback)((function(){Z()}),[Z]),O=(0,a.useCallback)((function(e){13===e.nativeEvent.keyCode&&Z()}),[Z]);return o().createElement("div",{className:"list-row file"},o().createElement("div",{className:"inner"},o().createElement("div",{className:"indent",style:{width:h}},p.map((function(e,t){return o().createElement("div",{key:t,className:"indent-guide",style:{width:"".concat(wn,"px")}})}))),o().createElement("div",{className:"twisted",style:{paddingLeft:h}}),o().createElement("div",{className:"label edit icon","data-name":m},o().createElement(Jt.II,{className:"fileNameEditor",autoFocus:!0,value:E,autoComplete:"off",onClick:tr,onChange:I,onBlur:P,onKeyPress:O,errorMessage:x}))))}var fr=n(84821);function mr(){var e=En(),t=e.files,n=e.loading,c=e.pasteSourceItem,l=e.createItem,s=e.renameItem,u=e.focus,d=e.draggingFocusPath,f=e.loadingPath,m=e.expandMap,p=t||fr.gu,h=(0,i.useDispatch)(),v=(0,a.useCallback)((function(e){e.stopPropagation(),h(Je.x.focusRoot())}),[h]),g=(0,a.useMemo)((function(){var e={width:"100%",height:"100%",overflow:"hidden"};return d===it.Ql?(0,S.Z)((0,S.Z)({},e),{},{backgroundColor:"#37373A"}):u===it.Ql?(0,S.Z)((0,S.Z)({},e),{},{outline:"1px auto rgb(16, 110, 190)"}):e}),[d,u]),y=function(e,t){return(0,a.useCallback)((function(n,r,a){var o=Zn;e&&(o=In),Ce({x:n.clientX+15,y:n.clientY+5},o,(function(n){if(n)switch(n.key){case"newFile":t(Pn.an.createFile(r,it.Ql));break;case"newFolder":t(Pn.an.createFolder(r,it.Ql));break;case"paste":e&&(t(Pn.an.clearPaste()),t(Je.x.setLoadingPath(it.Ql)),(0,ee.Qo)(e,r,it.Ql).then((function(e){t(Je.x.focus(e))})).catch((function(e){C.Z.handleErrorSingle("Error while paste file: ".concat(e.message)),t(Je.x.setLoadingPath(null))})));break;case"download":$.Z.download((0,ee.i)(r,it.Ql),a)}}))}),[t,e])}(c,h),E=(0,k.e)(),b=E.currentProject,w=E.currentProjectId,x=(0,a.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),b&&b.id&&(u!==it.Ql&&h(Je.x.focusRoot()),y(e,b.id,b.name))}),[b,u,y,h]),N=(0,a.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var t=Ke(e);if(null!==t){var n=(0,ee.hl)(t);(0,r.Z)(n,1)[0]!==it.Ql&&h(Je.x.setDraggingFocusPath(it.Ql))}else h(Je.x.setDraggingFocusPath(it.Ql))}),[h]),T=(0,a.useCallback)((function(e){if(e.preventDefault(),e.stopPropagation(),h(Je.x.setDraggingFocusPath(null)),w){var t=e.dataTransfer.getData("type"),n=Qe(e).path;if("file"===t&&n){var a=(0,ee.hl)(n);(0,r.Z)(a,1)[0]!==it.Ql&&pr(h,n,w)}else"folder"===t&&n?it.Ql!==n&&pr(h,n,w):e.dataTransfer.files&&e.dataTransfer.files.length&&function(e,t,n){var r,a=e.dataTransfer.items,o=[],i=(0,ce.Z)(a);try{for(i.s();!(r=i.n()).done;){var c=r.value;o.push(c.webkitGetAsEntry())}}catch(l){i.e(l)}finally{i.f()}t(Je.x.setLoadingPath(it.Ql)),_n(n,o,it.Ql,t).then((function(){C.Z.handleInfoSingle("upload success!")})).catch((function(){C.Z.handleWarnSingle("upload with warning, please check output!")})).finally((function(){t(Je.x.setLoadingPath(null))}))}(e,h,w)}}),[w,h]),I=(0,a.useCallback)((function(){h(Je.x.setDraggingFocusPath(null))}),[h]);return o().createElement("div",{style:g,onClick:v,onContextMenu:x,onDragOver:je,onDragEnter:N,onDrop:T,onDragEnd:I},o().createElement(Jt.Xs,null,o().createElement(ve.Stack,{className:yn,styles:ur},(n||f===it.Ql)&&o().createElement(te.L,null),hr(p,{createItem:l,renameItem:s,expandMap:m}))))}function pr(e,t,n){e(Je.x.setLoadingPath(it.Ql)),(0,ee.wj)(t,n,it.Ql).then((function(t){e(Je.x.focus(t))})).catch((function(){e(Je.x.setLoadingPath(null))}))}function hr(e,t){var n=e.children||{},r=Object.keys(n)||[];if(r){r.sort();var a=t.createItem,i=e.path;if(a&&i===a.path){var c=(0,S.Z)((0,S.Z)({},t),{},{createItem:a});return"d"===a.type?o().createElement(o().Fragment,null,o().createElement(nr,(0,gn.Z)({parent:e},c)),gr(r,n,t),vr(r,n,t)):o().createElement(o().Fragment,null,gr(r,n,t),o().createElement(rr,(0,gn.Z)({parent:e},c)),vr(r,n,t))}return o().createElement(o().Fragment,null,gr(r,n,t),vr(r,n,t))}return null}function vr(e,t,n){return e.map((function(r){var a=t[r];if("-"===a.type){var i=n.renameItem,c=a.path;return i&&i.path===c?function(e,t,n,r){return o().createElement(o().Fragment,{key:e.path},o().createElement(dr,(0,gn.Z)({levelNames:t,node:e},r,{renameItem:n})))}(a,e,i,n):function(e,t){return o().createElement(o().Fragment,{key:e.path},o().createElement(Hn,{file:e}))}(a)}return null}))}function gr(e,t,n){return e.map((function(r){var a=t[r];if("d"===a.type){var i=n.renameItem,c=a.path;return i&&i.path===c?function(e,t,n,r){return o().createElement(o().Fragment,{key:e.path},o().createElement(ar,(0,gn.Z)({levelNames:t,node:e},r,{renameItem:n})),yr(e,r))}(a,e,i,n):function(e,t){return o().createElement(o().Fragment,{key:e.path},o().createElement(zn,{file:e}),yr(e,t))}(a,n)}return null}))}function yr(e,t){var n=t.expandMap;if(!(n&&n[e.path]))return null;if(e.children)return hr(e,t);var r=t.createItem,a=e.path;if(r&&a===r.path){var i=(0,S.Z)((0,S.Z)({},t),{},{createItem:r});return"d"===r.type?o().createElement(nr,(0,gn.Z)({parent:e},i)):o().createElement(rr,(0,gn.Z)({parent:e},i))}return null}function Er(){var e=(0,k.e)().currentProject,t=En().focus,n=(0,i.useDispatch)(),r=(0,a.useCallback)((function(r){r.stopPropagation(),e&&e.id&&n(Pn.an.createFile(e.id,t||fr.gu.path))}),[e,t,n]),c=(0,a.useCallback)((function(r){r.stopPropagation(),e&&e.id&&n(Pn.an.createFolder(e.id,t||fr.gu.path))}),[e,t,n]);return o().createElement("div",{className:"operate"},o().createElement(ve.FontIcon,{iconName:"PageAdd",onClick:r}),o().createElement(ve.FontIcon,{iconName:"FabricNewFolder",onClick:c}))}var kr=vn.Z.Panel;var br=function(){var e=(0,k.e)().currentProject;return o().createElement("div",{className:hn},o().createElement(vn.Z,{defaultActiveKey:["filesystem"]},o().createElement(kr,{key:"filesystem",headerClass:"explore-panel-header",title:e?e.name:"Untitled",extra:o().createElement(Er,null)},o().createElement(mr,null))))};var Cr,wr="_1OdWAmgXla8kwwuH9RpLn8",xr="N6rb9S8_ZdKZ_UmBxPIuu",Nr="_3PYsPx4ibpgNEeQdQ1kVWe",Tr="_1y-en9A5dFpMpJM1rGrjYQ",Ir="_1HNpVYbD-EYXzTc_Q6l6BS",Zr="_11HpfROMFgggo5L9Z69SF3",Pr="_3N2oURVAYagaZYnOpdUYGU",Or="_1b1kxOSFTqPwjvhvDQCVLt";!function(e){e.install="INSTALL",e.uninstall="UNINSTALL",e.activate="ACTIVATE",e.deactivate="DEACTIVATE"}(Cr||(Cr={}));var Sr=function(e){var t=e.className,n=e.option,r=e.onClick;return o().createElement("div",{className:G()(t,wr)},o().createElement("div",{className:xr},n.description.icon&&0===n.description.icon.indexOf("#")?o().createElement("div",{className:Nr},o().createElement(ve.Icon,{className:Tr,iconName:n.description.icon.substr(1)})):o().createElement("div",{className:Nr},o().createElement("img",{className:Tr,src:n.description.icon})),o().createElement("div",{className:Ir},o().createElement("div",{className:Zr},n.description.title),n.description.description&&o().createElement("div",{className:Pr},n.description.description)),!n.internalPlugin&&n.active&&o().createElement("div",{className:Or},o().createElement(ve.TooltipHost,{content:"Deactivate"},o().createElement(ve.IconButton,{size:12,iconProps:{iconName:"DisableUpdates"},onClick:function(){return r(Cr.deactivate)}})),o().createElement(ve.TooltipHost,{content:"Uninstall"},o().createElement(ve.IconButton,{size:12,iconProps:{iconName:"Delete"},onClick:function(){return r(Cr.uninstall)}}))),!n.internalPlugin&&!n.active&&o().createElement("div",{className:Or},o().createElement(ve.PrimaryButton,{size:12,onClick:function(){return r(Cr.activate)}},"activate"))))},Lr="_324LXoY3-SSEIjVho9eA-h",Ar="_1SMKVXWMknxzlqmVkwBAgz",Dr="_36UGZc6eDoKkX5BipIXzco",_r="_3S8C7GVx9X9UN4SrGww35j",Rr="_2DoIKKKQSI-r97NEZYVU4R",Mr="CUg5OhzJhLC_05eVmscep",Fr=function(e){var t=e.className,n=e.option,r=e.onClick;return o().createElement("div",{className:G()(t,Lr)},o().createElement("div",{className:Ar},o().createElement("div",{className:Dr},o().createElement("div",{className:_r},n.name),n.description&&o().createElement("div",{className:Rr},n.description)),o().createElement("div",{className:Mr},o().createElement(ve.PrimaryButton,{size:12,onClick:r},"Install"))))},Br="_3wo2MobNQPv4sPAaaVTgKl",Ur="_3LHgioQqM9r35mV_YpQ-_I",zr="_2pUsLva3cDH3Fn5UwTH3NT",jr=n(83112),Vr=vn.Z.Panel,Hr=(0,i.connect)(null,null)((function(e){var t=(0,a.useState)(x.EV.configurations||[]),n=(0,r.Z)(t,2),i=n[0],c=n[1],l=(0,a.useState)(""),s=(0,r.Z)(l,2),u=s[0],d=s[1],f=(0,jr.Z)(),m=function(){var e=(0,a.useState)([]),t=(0,r.Z)(e,2),n=t[0],o=t[1],i=function(){var e=(0,Z.Z)(I().mark((function e(){var t,n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://registry.nlark.com/@white-matrix/extensions");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,r=n["dist-tags"].latest,e.next=9,fetch("https://cdn.jsdelivr.net/npm/@white-matrix/extensions@".concat(r)).then(function(){var e=(0,Z.Z)(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,o(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){i()}),[]),{extensions:Object.values(n)}}().extensions;return(0,a.useEffect)((function(){var e=x.EV.onExtensionChange((function(e){c(x.EV.configurations)}));return function(){return e.dispose()}}),[]),o().createElement("div",{className:Br},o().createElement(vn.Z,{defaultActiveKey:["active","inactive"]},o().createElement(ve.Stack,{styles:{root:{padding:"0 12px"}},tokens:{childrenGap:10}},o().createElement(Jt.II,{value:u,onChange:function(e){d(e.target.value)},placeholder:"input plugin URL"})),o().createElement(ve.PrimaryButton,{className:Ur,text:f.formatMessage({id:"LOAD"}),onClick:function(){if(""!==u)return void p(u);C.Z.handleWarn([{source:w.O3.ALL,msg:"please input plugin info!"}])},checked:!0}),o().createElement(Vr,{key:"active",title:f.formatMessage({id:"activeModules"})},o().createElement(Jt.Xs,null,i.filter((function(e){return!!e.active})).map((function(e){return o().createElement(Sr,{className:zr,key:e.pluginId,option:e,onClick:function(t){return h(t,e)}})})))),o().createElement(Vr,{key:"inactive",title:f.formatMessage({id:"inactiveModules"})},o().createElement(Jt.Xs,null,i.filter((function(e){return!e.active})).map((function(e){return o().createElement(Sr,{className:zr,key:e.pluginId,option:e,onClick:function(t){return h(t,e)}})})))),o().createElement(Vr,{key:"all",title:f.formatMessage({id:"allPlugins"})},o().createElement(Jt.Xs,null,m.filter((function(e){return!e.active})).map((function(e){return o().createElement(Fr,{className:zr,key:e.name,option:e,onClick:function(){return p(e.url)}})}))))));function p(e){x.EV.loadExternalPlugin({url:e})}function h(e,t){e===Cr.activate&&x.EV.activate(t.pluginId),e===Cr.deactivate&&x.EV.deactivate(t.pluginId),e===Cr.uninstall&&x.EV.unload(t.pluginId)}})),Gr=n(60734),Wr=n(96297),Kr=vn.Z.Panel,Qr={root:{padding:"12px"}},qr={root:{padding:"0 12px"}};function Jr(){var e=(0,Wr.E)().userId,t=(0,u.D)(),n=(0,Gr.Iq)(e,t),r=(0,c.k6)(),i=(0,a.useCallback)((function(){showLoading__GLOBAL({loadingText:"Create Project",stepCount:3,currentStep:1,stepText:"Create Project..."}),n("default",!0,(function(e,t){r.push("/".concat(e,"/").concat(t,"?open=readme.md&type=preview"))}),(function(){hideLoading__GLOBAL()}))}),[n,r]);return o().createElement(vn.Z,{defaultActiveKey:["filesystem","recent"]},o().createElement(Kr,{key:"filesystem",title:"NO CURRENT PROJECT"},o().createElement(ve.Stack,null,o().createElement(ve.Stack.Item,{styles:Qr},"You have no current project."),o().createElement(ve.Stack,{styles:qr},o().createElement(Dn.z,{type:Dn.L.PRIMARY,text:"Create Project",onClick:i})))))}var Yr={compose:"_1HzQeAX4eyT7mu2kJcIx7y",header:"_2i4-nC55Sof59HrX0me2hF",label:"p6iD1_GOa91PryosCEysH",extra:"yRjQcpr-Dz2BEvypEy-0J",content:"_1W7GZlEB9zsKYmBQz64i4n"},Xr=(0,P.l6)(P.Zq.LEFT_AND_RIGHT_PANE_BACKGROUND),$r=(0,P.l6)(P.Zq.FONT_LEVEL_TWO),ea={backgroundColor:Xr},ta={color:$r};function na(e){var t=e.className,n=void 0===t?"":t,r=e.title,a=e.header,i=e.children,c=e.extra;return o().createElement("div",{className:G()(n,Yr.compose),style:ea},o().createElement("div",{className:Yr.header},o().createElement("div",{className:Yr.label},a||o().createElement("div",{className:Yr.title},r||"")),c&&o().createElement("div",null,c)),o().createElement("div",{className:Yr.content,style:ta},i))}function ra(){var e=(0,A.I)(),t=e.left,n=e.layout,r=(0,k.e)().currentProject,c=t&&t.key&&t.contentType&&t.contentType===D.IV.EXPLORER&&0!==(null===n||void 0===n?void 0:n[0]),l=t&&t.key&&t.contentType&&t.contentType===D.IV.PLUGIN_MANAGER&&0!==(null===n||void 0===n?void 0:n[0]),s=(0,i.useDispatch)(),u=(0,a.useCallback)((function(){s(Je.x.clearFocus())}),[s]),d=(0,jr.Z)();return o().createElement("div",{style:{width:"100%",height:"100%",marginRight:-5},onClick:u},c&&o().createElement(na,{title:d.formatMessage({id:"explorer"})},o().createElement("div",{className:"chainideExplorer",style:{width:"100%",height:"100%"}},r&&r.id?o().createElement(br,null):o().createElement(Jr,null))),o().createElement(na,{className:l?"":"hidden",title:d.formatMessage({id:"pluginManager"})},o().createElement(Hr,null)))}var aa=n(29833),oa=(0,P.l6)(P.Zq.LEFT_AND_RIGHT_PANE_BACKGROUND);function ia(){var e=(0,A.I)().right,t=(0,i.useSelector)((function(e){return e.controls}));return(null===e||void 0===e?void 0:e.key)&&(null===e||void 0===e?void 0:e.contentType)&&(null===e||void 0===e?void 0:e.contentType)===aa.IV.CONTROL?o().createElement(o().Fragment,null,t.map((function(t){return o().createElement(ca,(0,gn.Z)({key:t.id},t,{active:t.id===(null===e||void 0===e?void 0:e.key)}))}))):null}function ca(e){var t=e.id,n=e.name,r=e.active;return o().createElement(na,{className:G()({hidden:!r}),title:n,backgroundColor:oa},g.w.getComponent(t))}var la=(0,P.l6)(P.Zq.ALL_BACKGROUND),sa=(0,P.l6)(P.Zq.FONT_LEVEL_ONE),ua=(0,P.l6)(P.Zq.FONT_LEVEL_THREE),da={borderTop:"1px solid ".concat((0,P.l6)(P.Zq.INPUT_BACKGROUND))},fa={backgroundColor:(0,P.l6)(P.Zq.LEFT_AND_RIGHT_PANE_BACKGROUND)},ma={root:{selectors:{".TabPane":{color:ua},".TabPane:hover":{color:sa},".TabPaneActive ":{color:sa,borderBottom:"2px solid ".concat(sa)}}}},pa={root:{lineHeight:35,selectors:{".ms-Icon":{fontSize:13,color:ua,cursor:"pointer",marginLeft:8},".ms-Icon:hover":{color:sa}}}},ha={title:{borderStyle:"none",height:"22px",minWidth:"100px",lineHeight:"22px",backgroundColor:(0,P.l6)(P.Zq.INPUT_BACKGROUND)},caretDownWrapper:{height:"22px",lineHeight:"22px"}},va={backgroundColor:la},ga=n(62299),ya="_3xwZC5xAiDDuOoklA_Z_G3",Ea="_1oTGMLatSA-N-ANLc_M9cN",ka="_2PRGXAcPjJZpbGZaBn0F-2",ba="_27GGlUyqOt-dWPhYDUmNdG",Ca="zEJxWDf2idk_HAe6Ack6A",wa=n(42670),xa={styles:{beak:{display:"none"},beakCurtain:{background:"rgb(57, 58, 59)",borderRadius:"4px"},calloutMain:{background:"rgb(57, 58, 59)"}}};function Na(e){var t=e.className,n=void 0===t?"":t,r=e.selectedTab,a=e.children,i=e.extra,c=e.onChangeTabs,l=e.closeLogPane,s=e.clearAll,u=(0,jr.Z)();return o().createElement("div",{style:da,className:G()(n,ya)},o().createElement("div",{style:fa,className:Ea},o().createElement(ga.K,{horizontal:!0,styles:ma},o().createElement("div",{onClick:function(){return c(he.IV.OUTPUT)},className:G()({TabPaneActive:r===he.IV.OUTPUT},ka,"TabPane","chainideOutput")},o().createElement(wa.Z,{id:"OutputBottom"})),o().createElement("div",{onClick:function(){return c(he.IV.CONSOLE)},className:G()({TabPaneActive:r===he.IV.CONSOLE},ka,"TabPane","chainideConsole")},o().createElement(wa.Z,{id:"Console"})),o().createElement("div",{onClick:function(){c(he.IV.TERMINAL)},className:G()({TabPaneActive:r===he.IV.TERMINAL},ka,"TabPane","chainideTerminal")},o().createElement(wa.Z,{id:"Terminal"}))),o().createElement(ga.K,{horizontal:!0,styles:pa},i&&o().createElement("div",{className:ba},i),o().createElement(ve.TooltipHost,{content:u.formatMessage({id:"clearAll"}),calloutProps:xa},o().createElement(ve.FontIcon,{iconName:"Broom",style:{display:r===he.IV.TERMINAL?"none":"inherit"},onClick:s})),o().createElement(ve.TooltipHost,{content:u.formatMessage({id:"close"}),calloutProps:xa},o().createElement(ve.FontIcon,{iconName:"Cancel",onClick:l})))),o().createElement("div",{style:va,className:Ca},a))}var Ta="_1mSHDOp1w1oGeI7EA56Xgl",Ia={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:0,selectOnLineNumbers:!1,wordWrap:"on",lineNumbers:"off",lineDecorationsWidth:0,glyphMargin:!1,fixedOverflowWidgets:!0,minimap:{enabled:!1},renderLineHighlight:"none",selectionHighlight:!1,dragAndDrop:!1,cursorWidth:1,fontSize:13,lineHeight:22,wrappingIndent:"deepIndent",readOnly:!0},Za=function(e){var t=e.source,n=e.outputRows,r=(0,a.useRef)(null),i=re(r),c=i.height,l=i.width,s=(0,a.useRef)(null);(0,a.useEffect)((function(){s.current&&s.current.layout()}),[c,l]),(0,a.useEffect)((function(){C.Z.clearOutput(t)}),[t]);var u=(0,a.useCallback)((function(e){var n=e.filter((function(e){return t===w.O3.ALL||e.source===t})),a=[];n.forEach((function(e){return e.msg.toString().split("\n").map((function(t,n){var r="       ";if(0===n)switch(e.level){case w.in.ERROR:r="[error]";break;case w.in.WARNING:r="[warn] ";break;default:r="[info] "}t="".concat(r," ").concat(t),a.push(t)}))}));var o=a.join("\n");if(s.current?s.current.setValue(o):r.current&&(s.current=le.j6.create(r.current,(0,S.Z)((0,S.Z)({},Ia),{},{value:o,theme:"chainIdeEditTheme",language:"output"}))),s.current){var i=s.current.getModel();s.current.revealLine(i&&i.getLineCount()||0)}}),[t]);return(0,a.useEffect)((function(){u(n)}),[n,u]),o().createElement("div",{className:Ta,ref:r})},Pa="_2JOjlCVfmmw-SM1SO-oqZI",Oa="lEuc7-Rk7EedpHNltOc2o",Sa="_3WU3GwDnJ4uMLcQnZlfDZo",La="PtOMnsPPPVtKSstOk0FUh",Aa="y6lSSWaoylNLfNjdeI-8H",Da="_1JVIJ11aJH9Eg-lK2d5RM6",_a="_3rAaoBrRVwmxN8Uo4srpEu",Ra=n(31751);function Ma(e){var t=e.log,n=(0,Ra.k)(!0),a=(0,r.Z)(n,2),i=a[0],c=a[1].toggle;return o().createElement("div",{className:G()(Oa,t.level===qt.ERROR?Sa:"")},t.level===qt.ERROR&&o().createElement(ve.FontIcon,{iconName:"InfoSolid"}),o().createElement("div",{className:La},o().createElement("div",{className:G()(Aa,t.detail?Da:""),onClick:c},t.detail&&(i?o().createElement(ve.FontIcon,{iconName:"TriangleSolidRight12"}):o().createElement(ve.FontIcon,{iconName:"TriangleSolidDown12"})),o().createElement("div",null,t.message)),!i&&t.detail&&o().createElement("div",{className:_a},t.detail)))}function Fa(){var e=(0,a.useRef)({}),t=(0,a.useState)([]),n=(0,r.Z)(t,2),i=n[0],c=n[1],l=(0,a.useCallback)((function(){setTimeout((function(){if(e.current){var t=e.current;t.scrollTop=t.scrollHeight-t.clientHeight}}),1)}),[]);return(0,a.useEffect)((function(){c(Xt.logs()),l()}),[]),(0,a.useEffect)((function(){return Xt.onConsoleChange((function(){c(Xt.logs()),l()})).dispose}),[]),o().createElement("div",{className:Pa,ref:e},i.map((function(e,t){return o().createElement(Ma,{key:t,log:e})})))}var Ba=n(49835);function Ua(e){var t=e.tabs,n=e.onChange,r=e.onRemove,a=e.activeKey;return o().createElement(Ba.Z,{activeKey:a,onChange:n,editable:{onEdit:function(e,t){var n=t.key;"remove"===e&&(null===r||void 0===r||r(n))},showAdd:!1}},t.map((function(e){return o().createElement(Ba.J,{tab:e.title,key:e.id,closeIcon:"x"},e.content)})))}var za=n(99127),ja=n(77289),Va=n(78440),Ha=n(73678),Ga=n(89358);function Wa(){this.bytesLeft=0,this.codePoint=0,this.lowerBound=0}function Ka(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qa(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.height>0&&t.width>0}Wa.prototype.decode=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);if(0===this.bytesLeft)r<=127?t+=e.charAt(n):r>=192&&r<=223?(this.codePoint=r-192,this.bytesLeft=1,this.lowerBound=128):r>=224&&r<=239?(this.codePoint=r-224,this.bytesLeft=2,this.lowerBound=2048):r>=240&&r<=247?(this.codePoint=r-240,this.bytesLeft=3,this.lowerBound=65536):r>=248&&r<=251?(this.codePoint=r-248,this.bytesLeft=4,this.lowerBound=2097152):r>=252&&r<=253?(this.codePoint=r-252,this.bytesLeft=5,this.lowerBound=67108864):t+="\ufffd";else if(r>=128&&r<=191){if(this.bytesLeft--,this.codePoint=(this.codePoint<<6)+(r-128),0===this.bytesLeft){var a=this.codePoint;a<this.lowerBound||a>=55296&&a<=57343||a>1114111?t+="\ufffd":a<65536?t+=String.fromCharCode(a):(a-=65536,t+=String.fromCharCode(55296+(a>>>10&1023),56320+(1023&a)))}}else t+="\ufffd",this.bytesLeft=0,n--}return t};var qa=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elem=t,this.term=new ja.Terminal({rendererType:"dom",theme:{background:"#191a1c"}}),this.fitAddOn=new Va.FitAddon,this.term.loadAddon(new Ha.WebLinksAddon),this.term.loadAddon(this.fitAddOn),this.message=t.ownerDocument.createElement("div"),this.message.className="xterm-overlay",this.messageTimeout=2e3,this.resizeListener=function(){Qa(n.elem.parentNode)&&(n.fitAddOn.fit(),n.term.scrollToBottom())},this.term.open(t),this.term.focus(),this.resizeListener(),this.resizeObserver=new za.do((function(){Qa(n.elem.parentNode)&&(n.fitAddOn.fit(),n.term.scrollToBottom())})),this.resizeObserver.observe(this.elem),this.elem.addEventListener("resize",this.resizeListener),this.decoder=new Wa}var t,n,r;return t=e,(n=[{key:"info",value:function(){return{columns:this.term.cols,rows:this.term.rows}}},{key:"output",value:function(e){this.term.write(this.decoder.decode(e))}},{key:"showMessage",value:function(e,t){var n=this;this.message.textContent=e,this.elem.appendChild(this.message),this.messageTimer&&clearTimeout(this.messageTimer),t>0&&(this.messageTimer=setTimeout((function(){n.elem.removeChild(n.message)}),t))}},{key:"removeMessage",value:function(){this.message.parentNode===this.elem&&this.elem.removeChild(this.message)}},{key:"setWindowTitle",value:function(e){document.title=e}},{key:"setPreferences",value:function(e){var t=this;Object.keys(e).forEach((function(e){"EnableWebGL"===e&&e&&t.term.loadAddon(new Ga.WebglAddon)}))}},{key:"onInput",value:function(e){this.onDataHandler=this.term.onData((function(t){e(t)}))}},{key:"onResize",value:function(e){var t=this;this.onResizeHandler=this.term.onResize((function(){e(t.term.cols,t.term.rows)}))}},{key:"deactivate",value:function(){var e,t;null===(e=this.onDataHandler)||void 0===e||e.dispose(),null===(t=this.onResizeHandler)||void 0===t||t.dispose(),this.term.blur()}},{key:"reset",value:function(){this.removeMessage(),this.term.clear()}},{key:"write",value:function(e){this.removeMessage(),this.term.writeln(e)}},{key:"close",value:function(){this.resizeObserver.disconnect(),this.term.dispose()}}])&&Ka(t.prototype,n),r&&Ka(t,r),e}();function Ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ya=["webtty"],Xa=function(){function e(t,n,r,a,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.term=t,this.onCreate=o,this.onClose=i,this.connectionFactory=n,this.args=r,this.authToken=a,this.reconnect=5,this.bufSize=1024}var t,n,r;return t=e,(n=[{key:"open",value:function(){var e,t,n=this,r=this.connectionFactory.create();return function a(){r.onOpen((function(){var t;null===(t=n.onCreate)||void 0===t||t.call(n);var a=n.term.info();n.reconnect=0,r.send(JSON.stringify({Arguments:n.args,AuthToken:n.authToken}));var o=function(e,t){r.send("3"+JSON.stringify({columns:e,rows:t}))};n.term.onResize(o),o(a.columns,a.rows),n.term.onInput((function(e){for(var t=n.bufSize-1,a=0;a<Math.ceil(e.length/t);a++){var o=e.substring(a*t,Math.min((a+1)*t,e.length));r.send("1"+o)}})),e=setInterval((function(){r.send("2")}),3e4)})),r.onReceive((function(e){var t=e.slice(1);switch(e[0]){case"1":n.term.output(atob(t));break;case"2":case"3":break;case"4":var r=JSON.parse(t);n.term.setPreferences(r);break;case"5":var a=JSON.parse(t);console.log("Enabling reconnect: "+a+" seconds"),n.reconnect=a;break;case"6":var o=JSON.parse(t);n.bufSize=o}})),r.onClose((function(){clearInterval(e),n.term.deactivate(),n.args||n.term.showMessage("Connection Closed",0),n.reconnect>0&&!n.args?t=setTimeout((function(){r=n.connectionFactory.create(),n.term.reset(),n.reconnect-=1,a()}),1e3*n.reconnect):n.args})),r.open()}(),function(){clearTimeout(t),r.close()}}}])&&Ja(t.prototype,n),r&&Ja(t,r),e}();function $a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function to(e,t,n){return t&&eo(e.prototype,t),n&&eo(e,n),e}var no=function(){function e(t,n){$a(this,e),this.url=t,this.protocols=n}return to(e,[{key:"create",value:function(){return new ro(this.url,this.protocols)}}]),e}(),ro=function(){function e(t,n){$a(this,e),this.bare=new WebSocket(t,n)}return to(e,[{key:"open",value:function(){}},{key:"close",value:function(){this.bare.close()}},{key:"send",value:function(e){this.bare.send(e)}},{key:"isOpen",value:function(){return this.bare.readyState==WebSocket.CONNECTING||this.bare.readyState==WebSocket.OPEN}},{key:"onOpen",value:function(e){this.bare.onopen=function(t){e()}}},{key:"onReceive",value:function(e){this.bare.onmessage=function(t){e(t.data)}}},{key:"onClose",value:function(e){this.bare.onclose=function(t){e()}}}]),e}();function ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(l){c=!0,a=l}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function io(e){var t=e.socket,n=e.args,r=e.onInit,i=e.onOpen,c=e.onClose,l=(0,a.useRef)(),s=ao((0,a.useState)(!1),2),u=s[0],d=s[1];return(0,a.useEffect)((function(){if(l&&l.current&&t)var e=function(e,t,n,r,a,o){if(null!==e){var i=new qa(e),c=t,l=n?"?arg=-c&arg=".concat(n):"",s=new no(c+"?t=".concat(Date.now()),Ya),u=new Xa(i,s,l,"",r,o);null===a||void 0===a||a();var d=u.open();return window.addEventListener("unload",(function(){d(),i.close()})),{close:function(){d(),i.close()}}}}(l.current,t,n,(function(){null===r||void 0===r||r(e),d(!0)}),(function(){return null===i||void 0===i?void 0:i(e)}),(function(){return null===c||void 0===c?void 0:c(e)}))}),[n,c,r,i,l,t]),o().createElement("div",{style:{height:"100%",position:"relative"}},!u&&o().createElement("div",{className:"loading"},o().createElement("div",{className:"lds-default"},o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null)),o().createElement("p",null,"Connecting")),o().createElement("div",{ref:l,style:{height:"100%",position:"relative"}}))}function co(e){return function(e){if(Array.isArray(e))return uo(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||so(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(l){c=!0,a=l}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||so(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e,t){if(e){if("string"===typeof e)return uo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uo(e,t):void 0}}function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fo=(0,a.forwardRef)((function(e,t){var n=e.src,r=e.args,i=e.onCreate,c=lo((0,a.useState)([]),2),l=c[0],s=c[1],u=lo((0,a.useState)([]),2),d=u[0],f=u[1],m=lo((0,a.useState)(""),2),p=m[0],h=m[1],v=function(e,t){s((function(n){return n[e-1]=t,co(n)})),null===i||void 0===i||i()},g=function(e){var t=l.findIndex((function(t){return t===e}));-1!==t&&f((function(e){var n;return e.splice(t,1),h(null===(n=e[e.length-1])||void 0===n?void 0:n.id),co(e)}))};(0,a.useImperativeHandle)(t,(function(){return{createShell:function(e){y(e,n)}}}),[n]),(0,a.useEffect)((function(){return function(){return l.forEach((function(e){return null===e||void 0===e?void 0:e.close()}))}}),[]),(0,a.useEffect)((function(){var e=Date.now().toString();f([{index:1,id:e,title:"shell1",content:o().createElement(io,{onInit:function(e){var t;v((null===(t=d[d.length-1])||void 0===t?void 0:t.index)?d[d.length-1].index:1,e)},onClose:g,socket:n,args:r})}]),h(e)}),[n]);var y=function(e,t){var n=Date.now().toString();f((function(r){var a,i;return r.push({index:(null===(a=r[r.length-1])||void 0===a?void 0:a.index)?r[r.length-1].index+1:1,id:n,title:"shell".concat((null===(i=r[r.length-1])||void 0===i?void 0:i.index)?r[r.length-1].index+1:1),content:o().createElement(io,{onInit:function(e){var t;v((null===(t=r[r.length-1])||void 0===t?void 0:t.index)?r[r.length-1].index:1,e)},args:e,onClose:g,socket:t})}),co(r)})),h(n)};return o().createElement("div",{className:"wrapper",style:{height:"100%",width:"100%"}},o().createElement(Ua,{onChange:function(e){return h(e)},activeKey:p,tabs:d,onRemove:function(e){f((function(t){var n,r=t.findIndex((function(t){return t.id===e})),a=l[r];return null===a||void 0===a||a.close(),t.splice(r,1),h(null===(n=t[t.length-1])||void 0===n?void 0:n.id),co(t)}))}}))})),mo=n(94938),po=new(function(){function e(){(0,f.Z)(this,e)}return(0,m.Z)(e,[{key:"getTerminalUrl",value:function(){var e=(0,Z.Z)(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,mo.ZP)("/workspace/startTerminal",{method:"get",params:{workspaceId:t}}).catch((function(){return{data:""}}));case 2:return n=e.sent,r=n.data,e.abrupt("return",{data:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),ho=n(26899),vo=n(6719),go=n(13418),yo="_2OU-I_TnqwCAVn_pXencm7";function Eo(e,t){var n,i,c=e.visible,l=(e.extraArgs,(0,a.useRef)(null)),s=(0,a.useState)(""),u=(0,r.Z)(s,2),d=u[0],f=u[1],m=(0,k.e)().currentProjectId,p=(0,A.I)(),h=(0,Wr.E)().userId,v=(0,a.useCallback)((0,Z.Z)(I().mark((function e(){var t,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=ho.T7.syncGet(vo.j.KEYCLOAK_AUTH_TOKEN))&&(t=(0,go.o)(t,h)),e.next=4,po.getTerminalUrl(m||"");case 4:(n=e.sent).data&&f("".concat("wss://testgateway.chainide.com","/").concat(n.data,"/ws").concat(t?"?jwt=".concat(t):""));case 6:case"end":return e.stop()}}),e)}))),[m,h]);return(0,a.useEffect)((function(){c&&!d&&v()}),[v,c,l,d]),o().createElement("div",{className:yo,ref:l},o().createElement(fo,{ref:t,src:d,args:null===(n=p.centerBottom)||void 0===n||null===(i=n.extra)||void 0===i?void 0:i.args}))}var ko=(0,a.forwardRef)(Eo),bo=[{key:w.O3.ALL,text:"All"},{key:w.O3.COMPILE,text:"Compile"},{key:w.O3.DEPLOY,text:"Deploy"},{key:w.O3.INTERACTION,text:"Interaction"}],Co=[];function wo(){var e,t,n,c,l,s,u,d,f=(0,a.useState)(Co),m=(0,r.Z)(f,2),p=m[0],h=m[1],v=(0,A.I)(),g=(0,a.useState)(w.O3.ALL),y=(0,r.Z)(g,2),E=y[0],k=y[1],b=(0,a.useRef)(),x=(0,i.useDispatch)(),N=(0,a.useCallback)((function(){x(D.He.updateLayout((0,S.Z)((0,S.Z)({},v.layout),{},{bottom:0})))}),[x,v.layout]),T=(0,a.useCallback)((function(){C.Z.clearOutput(E)}),[E]);(0,a.useEffect)((function(){return window.addEventListener("beforeunload",(function(){x(D.He.updateCenterBottomPane(he.IV.OUTPUT))})),x(D.He.updateCenterBottomPane(he.IV.OUTPUT)),function(){x(D.He.updateCenterBottomPane(he.IV.OUTPUT))}}),[x]),(0,a.useEffect)((function(){b.current&&x(D.He.setTerminal({createShell:function(e){var t,n;null===(t=b.current)||void 0===t||null===(n=t.createShell)||void 0===n||n.call(t,e)}}))}),[x,b]),(0,a.useEffect)((function(){h(C.Z.getOutputRows());var e=C.Z.onRowsDidChange((function(){x(D.He.updateLayout((0,S.Z)((0,S.Z)({},v.layout),{},{bottom:v.layout.bottom||300}))),x(D.He.updateCenterBottomPane(he.IV.OUTPUT)),h(C.Z.getOutputRows())})),t=Xt.onConsoleChange((function(){x(D.He.updateLayout((0,S.Z)((0,S.Z)({},v.layout),{},{bottom:v.layout.bottom||300}))),x(D.He.updateCenterBottomPane(he.IV.CONSOLE))}));return function(){e.dispose(),t.dispose()}}),[x,v.layout]);var I=(0,a.useCallback)((function(){Xt.clearLog()}),[]),Z=(e={},(0,j.Z)(e,he.IV.OUTPUT,o().createElement(Jt.wX,{label:"",options:bo,selectedKey:E,styles:ha,onChange:function(e,t,n){t&&t.key&&k(t.key)}})),(0,j.Z)(e,he.IV.TERMINAL,o().createElement(ot.xu,{onClick:function(){var e,t;return null===(e=v.terminal)||void 0===e||null===(t=e.createShell)||void 0===t?void 0:t.call(e,"")},iconName:"Add"})),e);return o().createElement(Na,{selectedTab:null===(t=v.centerBottom)||void 0===t?void 0:t.contentType,extra:Z[(null===(n=v.centerBottom)||void 0===n?void 0:n.contentType)||0],onChangeTabs:function(e){x(D.He.updateCenterBottomPane(e))},closeLogPane:N,clearAll:(null===(c=v.centerBottom)||void 0===c?void 0:c.contentType)===he.IV.OUTPUT?T:I},o().createElement("div",{style:{display:(null===(l=v.centerBottom)||void 0===l?void 0:l.contentType)!==he.IV.CONSOLE?"none":"",height:"100%"}},o().createElement(Fa,null)),o().createElement("div",{style:{display:(null===(s=v.centerBottom)||void 0===s?void 0:s.contentType)!==he.IV.OUTPUT?"none":"",height:"100%"}},o().createElement(Za,{source:E,outputRows:p})),o().createElement("div",{style:{display:(null===(u=v.centerBottom)||void 0===u?void 0:u.contentType)!==he.IV.TERMINAL?"none":"",height:"100%"}},o().createElement(ko,{visible:(null===(d=v.centerBottom)||void 0===d?void 0:d.contentType)===he.IV.TERMINAL,ref:b,extraArgs:""})))}var xo=n(63248),No="_373F27qw4jKujCnF7RvmEr",To="_34lDXU7VOGuUUSbRn2lBFl",Io="_2Qc3_zcRqbWpQUsw1ETqhV";function Zo(){var e=(0,a.useState)(!1),t=(0,r.Z)(e,2),n=t[0],c=t[1],l=(0,i.useDispatch)(),s=(0,a.useRef)(null),u=(0,A.I)();(0,a.useEffect)((function(){xo.T7.syncSet("chain-ide-pane",u)}),[u]);var d=G()([(0,j.Z)({},To,!0===n),(0,j.Z)({},Io,!1===n)]);return o().createElement("div",{className:No,ref:s},o().createElement(V.Z,{split:"vertical",size:u.layout.left,maxSize:400,minSize:200,onDragStarted:function(){return c(!0)},onDragFinished:function(e){l(D.He.updateLayout((0,S.Z)((0,S.Z)({},u.layout),{},{left:e}))),c(!1)}},o().createElement(ra,null),o().createElement(V.Z,{split:"vertical",primary:"second",size:u.layout.right,minSize:200,maxSize:400,onDragStarted:function(){return c(!0)},onDragFinished:function(e){l(D.He.updateLayout((0,S.Z)((0,S.Z)({},u.layout),{},{right:e}))),c(!1)}},o().createElement(V.Z,{split:"horizontal",primary:"second",size:u.layout.bottom,minSize:0,className:d,pane1Style:{overflow:"hidden"},onDragStarted:function(){return c(!0)},onDragFinished:function(e){l(D.He.updateLayout((0,S.Z)((0,S.Z)({},u.layout),{},{bottom:e}))),c(!1)}},o().createElement(pn,null),o().createElement(wo,null)),o().createElement(ia,null))))}var Po="_1bPR8lQeIsHNNsTuoPwLb7",Oo=(0,P.l6)(P.Zq.BORDER);function So(){var e=(0,i.useSelector)((function(e){return e.controls}));return o().createElement("div",{className:Po,style:{backgroundColor:Oo}},e.map((function(e,t){return o().createElement("div",{key:e.id,className:"controls".concat(t)},o().createElement(Lo,e))})))}function Lo(e){var t=(0,A.I)(),n=t.right,r=t.layout,c=(0,i.useSelector)((function(e){return e.controls})),l=e.name,s=e.id,u=e.iconName,d=(0,i.useDispatch)(),f=o().useCallback((function(e,t){e&&e.preventDefault(),0===r.right?(d(D.He.togglePane(D.IV.CONTROL,t)),d(D.He.updateLayout((0,S.Z)((0,S.Z)({},r),{},{right:300})))):t!==(null===n||void 0===n?void 0:n.key)?d(D.He.togglePane(D.IV.CONTROL,t)):(d(D.He.closePane(D.IV.CONTROL)),d(D.He.updateLayout((0,S.Z)((0,S.Z)({},r),{},{right:0}))))}),[d,r,null===n||void 0===n?void 0:n.key]);return(0,a.useEffect)((function(){r.right>0&&(null!==n&&void 0!==n&&n.key||d(D.He.togglePane(D.IV.CONTROL,c[0].id)))}),[c,d,r,n]),o().createElement(Dn.z,{type:Dn.L.RIGHT_CONTROL_BUTTON,iconProps:{iconName:u},eventType:"RIGHT_DEPLOY&INTERACT",text:l,checked:!(!n||n.key!==s),onClick:function(e){f(e,s)}})}var Ao=n(35325),Do=n(30470),_o="_2aEfA4M5GpI5rZ6QFfAHm0",Ro=n(67826),Mo=n.n(Ro),Fo=n(45303),Bo=n(58363),Uo="_1OE0TISlCl9WZgmR8ER8eI";function zo(){var e=(0,c.k6)(),t=s().id,n=(0,jr.Z)(),r=(0,Ao.gU)(),i=(0,k.e)().currentProject,l=(0,a.useCallback)((function(){try{if((0,mo.AJ)(),!i)return void e.replace("/");var a=i.type,o=i.template;if(a===Bo.c.PUBLIC||a===Bo.c.PRIVATE)return void e.replace("/");if(void 0===o)return void e.replace("/");Fo.Q.show({loadingText:n.formatMessage({id:"savingText"}),stepCount:2,currentStep:1,stepText:n.formatMessage({id:"saveAsTemplateText"})}),r(t,o,(0,Z.Z)(I().mark((function r(){return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Fo.Q.show({loadingText:n.formatMessage({id:"savingText"}),stepCount:2,currentStep:2,stepText:n.formatMessage({id:"deleteTempProjectText"})}),r.prev=1,r.next=4,q.B.removeProject(t);case 4:Fo.Q.hide(),e.replace("/"),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),Fo.Q.hide();case 11:case"end":return r.stop()}}),r,null,[[1,8]])}))),(function(){Fo.Q.hide()}))}catch(c){console.error(c),Fo.Q.hide()}}),[r,i,e,t,n]);return o().createElement("div",{className:Uo,onClick:l},o().createElement("img",{src:Mo(),alt:"C"}),o().createElement(ve.FontIcon,{iconName:"NavigateBack"}))}function jo(){return o().createElement("div",{className:_o},o().createElement(_.p_,{eventType:"MENU_EXPOSURE",action:_.A3.exposure}),o().createElement(zo,null))}var Vo="_2tQ2-45pzCQASWnZQ84ysz";function Ho(e){var t=e.name,n=e.disabled,i=e.save,c=(0,a.useState)(t),l=(0,r.Z)(c,2),s=l[0],u=l[1],d=(0,a.useState)(""),f=(0,r.Z)(d,2),m=f[0],p=f[1],h=(0,a.useCallback)((function(){i(s,m)}),[i,s,m]),v=(0,a.useCallback)((function(e){13===e.nativeEvent.keyCode&&i(s,m)}),[i,s,m]),g=(0,a.useCallback)((function(e,t){p(function(e){if(!e||0===e.length||/^\s+$/.test(e))return"A project name must be provided.";if(e.length>128)return"project name should be less than 128.";if(/^\s|\s$/.test(e))return"Leading or trailing whitespace detected in project name.";return""}(t||"")),u(t)}),[]);return o().createElement(Jt.II,{disabled:n,className:Vo,autoFocus:!0,value:s,onChange:g,onBlur:h,onKeyPress:v,errorMessage:m})}function Go(){var e=(0,k.e)().currentProject,t=(0,a.useState)(!1),n=(0,r.Z)(t,2),c=n[0],l=n[1],s=(0,a.useState)(!1),u=(0,r.Z)(s,2),d=u[0],f=u[1],m=(0,a.useMemo)((function(){return e&&e.name||""}),[e]),p=(0,a.useCallback)((function(){l(!0)}),[]),h=(0,i.useDispatch)(),v=(0,a.useCallback)((function(t,n){e&&e.id&&t&&!n?(f(!0),q.B.renameProject(e.id,t).then((function(){h(b.r.setCurrentProjectName(t))})).finally((function(){f(!1),l(!1)}))):l(!1)}),[h,e]);return o().createElement(ve.Stack,{horizontal:!0,horizontalAlign:"center"},o().createElement(ve.Stack.Item,{grow:!0},o().createElement(ve.Stack,{grow:!0,horizontalAlign:"center",verticalAlign:"center",horizontal:!0},d&&o().createElement(ve.Spinner,{styles:{root:{marginRight:"10px"}},size:ve.SpinnerSize.xSmall}),c?o().createElement(Ho,{disabled:d,name:m,save:v}):o().createElement(ve.Text,{onClick:p},m))))}var Wo="_3BWs0D3Hkq48-l51UR5b22",Ko="_2KyEWc34AGI1yU7w2G1iz6",Qo=n(1754),qo=n(32770),Jo=n(43445),Yo=n(90331),Xo=(0,P.l6)(P.Zq.FONT_LEVEL_ONE),$o=(0,S.Z)((0,S.Z)({},Yo.Rk),{},{root:{color:Xo,backgroundColor:"#393A3B",height:"22px",margin:0,borderRadius:"2px",selectors:{".ms-Icon":{height:"100%",paddingTop:6},".ms-Button-label":{lineHeight:14},img:{width:"100%",height:"100%"}}},rootHovered:{color:Xo,backgroundColor:"rgba(255, 255, 255, 0.2)",selectors:{".ms-Icon":{color:Xo}}},rootFocused:{color:Xo,backgroundColor:"rgba(255, 255, 255, 0.2)",selectors:{".ms-Icon":{color:Xo}}},rootPressed:{backgroundColor:"rgba(255, 255, 255, 0.2)",selectors:{".ms-Button-icon":{color:Xo}}}}),ei=(0,Jo.ZC)({wrapper:{width:"inherit"},callout:{maxWidth:300},mvmIcon:{width:12,height:12},mvmConnectedIcon:{width:13,height:13}}),ti=(0,P.l6)(P.Zq.FONT_LEVEL_ONE),ni=(0,P.l6)(P.Zq.PRIMARY),ri=(0,P.l6)(P.Zq.UN_CHOOSE_BAR_BACKGROUND),ai=(0,ve.mergeStyleSets)({wrapper:{minWidth:240,position:"relative",padding:24},header:{fontSize:13,textAlign:"center"},buttonTitle:{fontSize:13,textAlign:"center",marginBottom:"5px"},inner:{paddingTop:12,textAlign:"center"},UnloadButton:{paddingTop:30,textAlign:"center"},buttonImage:{width:12,height:12},returnIcon:{position:"absolute",top:12,left:12,cursor:"pointer"}}),oi={root:{color:ti,height:"26px",lineHeight:"26px",margin:0,border:0,width:"100%",backgroundColor:ri,selectors:{".ms-Button-label":{fontWeight:400}}},rootHovered:{color:ti,backgroundColor:ni},rootPressed:{color:ti,backgroundColor:ni}},ii=(0,S.Z)((0,S.Z)({},oi),{},{root:{color:ti,height:"26px",lineHeight:"26px",margin:0,border:0,width:"100%",backgroundColor:ri,selectors:{".ms-Button-label":{fontWeight:400,textAlign:"left"},".ms-Icon":{height:"100%",marginLeft:32,paddingTop:8},img:{width:"100%",height:"100%"}}}}),ci=n(21556),li=n(4808),si=n(98067);function ui(){var e=(0,i.useDispatch)(),t=(0,a.useCallback)((function(){e({type:ci.TQ.SET_CONTENT,data:li.k.INJECTED_PROVIDER_LIST})}),[e]);return o().createElement("div",{className:ai.wrapper},o().createElement("div",{className:ai.header},o().createElement(wa.Z,{id:"ToConnectWallet"})),o().createElement("div",{className:ai.inner},o().createElement(ve.Stack,{tokens:{childrenGap:15}},o().createElement(ve.Stack.Item,null,o().createElement(Jt.zx,{className:"connectToEvm",styles:oi,type:Jt.L$.DEFAULT,onClick:function(){e({type:ci.TQ.SET_WALLET_LOADING,data:!0}),x.EV.activate(si.pluginConfig.config.pluginId)}},"JavaScript VM")),o().createElement(ve.Stack.Item,null,o().createElement(Jt.zx,{className:"connectToMatemask",styles:oi,type:Jt.L$.DEFAULT,onClick:t},"Injected Web3 Provider")))))}var di=n(54516),fi=n(85153);function mi(){var e=(0,i.useDispatch)(),t=(0,fi.vo)(),n=(0,a.useCallback)((function(){e({type:ci.TQ.SET_CONTENT,data:li.k.PROVIDER_TYPE_VIEW})}),[e]);return o().createElement("div",{className:ai.wrapper},o().createElement(ve.Icon,{className:ai.returnIcon,iconName:"ReturnKey",onClick:n}),o().createElement("div",{className:ai.header},o().createElement(wa.Z,{id:"ToConnectWallet"})),o().createElement("div",{className:ai.inner},o().createElement(ve.Stack,{tokens:{childrenGap:15}},t.map((function(t){return o().createElement(ve.Stack.Item,{key:t.pluginId},o().createElement(Jt.zx,{styles:ii,type:Jt.L$.DEFAULT,onClick:function(){return function(t){var n=x.EV.plugins.find((function(e){return e.config.pluginId===t.library}));e({type:ci.TQ.SET_WALLET_LOADING,data:!0}),n?x.EV.activate(t.library):x.EV.loadExternalPlugin(t)}(t.loadParams)},iconProps:{iconType:ve.IconType.image,imageProps:{src:t.iconPath,className:ai.buttonImage}}},t.name))})))))}var pi=n(48706),hi=n(9307),vi=n(40768),gi=[{chainId:"0x38",chainName:"BSC Mainnet",rpcUrls:["https://bsc-dataseed1.binance.org/"],nativeCurrency:{name:"BSC Mainnet ETH",symbol:"BNB",decimals:18},blockExplorerUrls:["https://bscscan.com/"]},{chainId:"0x61",chainName:"BSC Testnet",rpcUrls:["https://data-seed-prebsc-1-s1.binance.org:8545/"],nativeCurrency:{name:"BSC Testnet ETH",symbol:"BNB",decimals:18},blockExplorerUrls:["https://testnet.bscscan.com"]}];function yi(){var e=(0,k.e)().currentProjectId,t=(0,u.D)(),n=(0,jr.Z)(),r=pi.z$.wallet?hi.my[pi.z$.wallet.walletId]:"",a=t===vi.U.Binance&&pi.z$.wallet&&pi.z$.wallet.walletId===hi.fy.MetamaskWallet;return o().createElement("div",{className:ai.wrapper},o().createElement("div",{className:ai.header},"".concat(r," ").concat(n.formatMessage({id:"isConnected"}))),a&&o().createElement("div",{className:ai.inner},o().createElement(ve.Stack,{tokens:{childrenGap:15}},o().createElement(ve.Stack.Item,null,o().createElement(wa.Z,{id:"AddOrSwitch"})),gi.map((function(e){return o().createElement(ve.Stack.Item,{key:e.chainId},o().createElement(Jt.zx,{styles:oi,type:Jt.L$.DEFAULT,onClick:function(){return t=e,void window.ethereum.request({method:"wallet_addEthereumChain",params:[t]}).then((function(){C.Z.handleInfo([{source:w.O3.ALL,msg:"".concat(t.chainName," is added successfully")}])})).catch((function(e){C.Z.handleErrorSingle("Error while add chain: ".concat(e.message))}));var t}},e.chainName))})))),o().createElement("div",{className:ai.UnloadButton},o().createElement(ve.Stack,{tokens:{childrenGap:15}},o().createElement(ve.Stack.Item,null,o().createElement(Jt.zx,{styles:oi,type:Jt.L$.DEFAULT,onClick:function(){pi.z$.wallet&&e&&x.EV.deactivate(pi.z$.wallet.walletId)}},o().createElement(wa.Z,{id:"Unload"}))))))}var Ei=n.p+"assets/2.0.0/static/media/connected-wallet.71ea8327.svg",ki=n.p+"assets/2.0.0/static/media/unconnected-wallet.a15265a8.svg",bi=n(88834);var Ci=function(){var e=(0,i.useDispatch)(),t=(0,jr.Z)(),n=(0,pi.Dz)().currentChainID,c=(0,di.v)(),l=c.content,s=c.loadingWallet,u=(0,Ra.k)(!1),d=(0,r.Z)(u,2),f=d[0],m=d[1].toggle,p=(0,Qo.M)("wallet-selector-label"),h=(0,Qo.M)("wallet-selector-description"),v=(0,bi.gY)((function(){return m()})),g=(0,a.useMemo)((function(){return n?{text:t.formatMessage({id:"connected"}),iconName:"ConnectVirtualMachine",iconPath:Ei,className:ei.mvmConnectedIcon}:{text:t.formatMessage({id:"unconnected"}),iconName:"DisconnectVirtualMachine",iconPath:ki,className:ei.mvmIcon}}),[n,t]);return(0,a.useEffect)((function(){e(n?{type:aa.TQ.SET_CONTENT,data:li.k.CONNECTED_VIEW}:{type:aa.TQ.SET_CONTENT,data:li.k.PROVIDER_TYPE_VIEW})}),[e,n]),o().createElement("div",{className:ei.wrapper},o().createElement(Jt.zx,{text:g.text,className:"walletSelectorCallout",styles:$o,onClick:m,type:Jt.L$.COMMAND_BAR_BUTTON,iconProps:{iconType:qo.T.image,imageProps:{src:g.iconPath,className:g.className}}}),f&&o().createElement(ve.Callout,{className:ei.callout,ariaLabelledBy:p,ariaDescribedBy:h,role:"alertdialog",gapSpace:0,target:".walletSelectorCallout",onDismiss:function(){return v&&m()},setInitialFocus:!0},l===li.k.PROVIDER_TYPE_VIEW&&o().createElement(ui,null),l===li.k.INJECTED_PROVIDER_LIST&&o().createElement(mi,null),l===li.k.CONNECTED_VIEW&&o().createElement(yi,null),s&&o().createElement(te.L,null)))},wi=n(91196),xi=n(59508),Ni={root:{height:"22px !important",width:"83px",whiteSpace:"nowrap"}},Ti={root:{height:"22px !important",lineHeight:"22px !important",width:"26px",backgroundColor:"#393A3B"},rootHovered:{backgroundColor:"rgba(255, 255, 255, 0.2)"},rootFocused:{backgroundColor:"rgba(255, 255, 255, 0.2)"},rootPressed:{backgroundColor:"rgba(255, 255, 255, 0.2)"}};var Ii={root:{backgroundColor:(0,P.l6)(P.Zq.BORDER)}},Zi={root:{height:"25px",marginRight:"8px"}},Pi=n(90039);function Oi(){var e=(0,a.useState)("project"),t=(0,r.Z)(e,2),n=t[0],c=t[1],l=(0,jr.Z)(),u=s().id,d=(0,fi.MX)(),f=(0,Ao.gU)(),m=(0,a.useState)(!1),p=(0,r.Z)(m,2),h=p[0],v=p[1],g=(0,xi.w)().loginDialogHidden,y=(0,k.e)().currentProject,E=function(){var e=(0,i.useDispatch)(),t=(0,xi.w)(),n=t.keycloak,r=t.userInfo,c=(0,a.useCallback)((function(){e({type:aa.aN.TOGGLE_LOGIN_MODAL,data:{loginDialogHidden:!1}})}),[e]);return(0,a.useMemo)((function(){return n&&!n.authenticated?o().createElement(Jt.zx,{type:Jt.L$.PRIMARY,text:"Sign in",styles:Ni,onClick:c}):r?o().createElement(wi.G,{accountIconStyle:Ti,bShowOtherMenus:!1,internalPage:!0}):""}),[c,n,r])}();(0,a.useEffect)((function(){if(y){var e=y.type;e!==Bo.c.PRIVATE_TEMPLATE&&e!==Bo.c.PUBLIC_TEMPLATE||c("template")}}),[y]);var b=(0,a.useCallback)((function(){y&&y.template&&(v(!0),f(u,y.template,(function(){return Fe.t6.info(l.formatMessage({id:"saveAsTemplateSuccess"})),v(!1),Promise.resolve()}),(function(){Fe.t6.error(l.formatMessage({id:"saveAsTemplateFail"})),v(!1)})))}),[f,y,u,l]);return o().createElement(ve.Stack,{className:Wo,horizontal:!0,verticalAlign:"center",styles:Ii},o().createElement(ve.Stack.Item,{grow:!0},o().createElement(jo,null)),o().createElement(ve.Stack.Item,{grow:!0,style:{display:"flex",justifyContent:"center"}},"project"===n?o().createElement(Go,null):o().createElement("span",null,l.formatMessage({id:"editTemplateTitle"}))),o().createElement(ve.Stack.Item,{grow:!0},o().createElement(ve.Stack,{horizontal:!0,horizontalAlign:"end",verticalAlign:"center"},"project"!==n&&o().createElement(Do.m,{showSpinner:h,className:Ko,buttonHeight:"22px",onClick:b,text:l.formatMessage({id:"saveAsTemplate"})}),d&&o().createElement(ve.Stack.Item,{styles:Zi},o().createElement(Ci,null)),o().createElement(ve.Stack.Item,{styles:Zi},E))),o().createElement(Pi._,{hidden:g}))}var Si=(0,P.l6)(P.Zq.INPUT_DISABLE_BACKGROUND),Li=(0,P.l6)(P.Zq.FONT_LEVEL_ONE),Ai=(0,P.l6)(P.Zq.BORDER),Di={root:{color:Li,backgroundColor:Ai,height:"35px",margin:0,selectors:{".ms-Icon":{color:Li}}},rootHovered:{color:Li,backgroundColor:(0,P.l6)(P.Zq.LEFT_AND_RIGHT_PANE_BACKGROUND),selectors:{".ms-Icon":{color:Li}}},rootPressed:{backgroundColor:Ai,selectors:{".ms-Button-icon":{color:Li}}},rootDisabled:{backgroundColor:Si}},_i={root:{backgroundColor:Ai,selectors:{".ms-Icon":{color:"red"},".ms-Button-label":{color:"red"}}},rootHovered:{backgroundColor:Ai,selectors:{".ms-Icon":{color:"red"}}},rootPressed:{backgroundColor:Ai,selectors:{".ms-Button-icon":{color:"red"}}},rootDisabled:{backgroundColor:Si}},Ri={root:{position:"absolute",left:0,right:0,bottom:0,zIndex:3,backgroundColor:Ai,height:"35px"}},Mi={root:{display:"flex",justifyContent:"flex-end"}},Fi=((0,P.l6)(P.Zq.INPUT_BACKGROUND),n(2962)),Bi=n(26853),Ui="2.0.0";function zi(){var e=(0,i.useDispatch)(),t=(0,A.I)().layout,n=(0,u.D)(),c=(0,jr.Z)(),l=(0,a.useState)(!0),s=(0,r.Z)(l,2),d=s[0],f=s[1];(0,a.useEffect)((function(){return Fi.A.onNetworkChange((function(e){f(e.websocketOnline)})).dispose}),[]);var m=(0,i.useSelector)((function(e){return e.bottom})),p=(0,a.useCallback)((function(n){0===t.bottom?e(D.He.updateLayout((0,S.Z)((0,S.Z)({},t),{},{bottom:300}))):e(D.He.updateLayout((0,S.Z)((0,S.Z)({},t),{},{bottom:0}))),(0,_.Kz)({eventType:"WALLET_BUTTON",action:_.A3.click,extra:n})}),[t,e]),h=(0,a.useCallback)((function(){e(Ue.z.openWelcomeTab("Welcome")),(0,_.Kz)({eventType:"WELCOME_BUTTON",action:_.A3.click})}),[e]);return(0,a.useEffect)((function(){var t=C.Z.onRowsDidChange((function(t){t.type===w.l5.ADD_ROWS&&e(D.He.openPane(D.IV.OUTPUT))}));return function(){return t.dispose()}}),[e]),(0,a.useEffect)((function(){e({type:aa.TQ.SET_WALLET_DATA,data:{currentChainID:"",currentAccounts:[],isBrowserWalletExist:c.formatMessage({id:"noWallet"})}})}),[e,c]),(0,bi.gY)((function(){return e(D.He.updateLayout((0,S.Z)((0,S.Z)({},t),{},{bottom:300})))})),o().createElement(ve.Stack,{horizontal:!0,styles:Ri,verticalAlign:"center"},o().createElement(ve.Stack.Item,{grow:!0},"\xa0\xa0",o().createElement(Dn.z,{type:Dn.L.COMMAND_BAR_BUTTON,iconProps:{iconName:"Database"},text:Ui}),o().createElement(Dn.z,{styles:Di,type:Dn.L.COMMAND_BAR_BUTTON,iconProps:{iconName:"Commitments"},text:c.formatMessage({id:"WelcomeBottomButton"}),onClick:function(){return h()}}),!d&&o().createElement(Dn.z,{styles:_i,type:Dn.L.COMMAND_BAR_BUTTON,iconProps:{iconName:"WifiWarning4"},text:c.formatMessage({id:"websocketError"})})),o().createElement(ve.Stack.Item,{grow:!0,styles:Mi},o().createElement(Dn.z,{styles:Di,type:Dn.L.COMMAND_BAR_BUTTON,iconProps:{iconName:"ProfileSearch"},text:"".concat(c.formatMessage({id:"SettingBottom"})," ").concat(Bi.W[n])}),o().createElement(Dn.z,{styles:Di,type:Dn.L.COMMAND_BAR_BUTTON,iconProps:{iconName:"Boards"},text:c.formatMessage({id:"LoggerBottom"}),onClick:function(){return p(D.IV.OUTPUT)}}),m.map((function(e){return o().createElement(ji,(0,gn.Z)({key:e.id},e))}))))}function ji(e){return o().createElement(o().Fragment,null,e.content())}var Vi=n(4451),Hi="_32PIn0YLyCtx9Qi5H8YHNr",Gi="_1pvlBJWZ4ZBQJZ8DpVZHr8",Wi="_30-L_n54JY6kYzs5pMqrmm",Ki="_101BKC7DmNcLIdy7hTw9sN",Qi="_1NnpO3XDXyQ3RkYJ8EYiiI",qi=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,a.useState)([]),n=(0,r.Z)(t,2),o=n[0],i=n[1];return(0,a.useEffect)((function(){var t=Vi.V.onCommandChange((function(){var t=Vi.V.getCommandsBy(e);i(t)}));return function(){return t.dispose()}}),[e]),o}(),t=(0,a.useState)(""),n=(0,r.Z)(t,2),i=n[0],c=n[1],l=(0,a.useState)(!1),s=(0,r.Z)(l,2),u=s[0],d=s[1],f=(0,a.useCallback)((function(e){var t=/macintosh|mac os x/i.test(navigator.userAgent);e.keyCode==="P".charCodeAt(0)&&(t?e.metaKey:e.ctrlKey)&&(d(!u),e.preventDefault())}),[u]);return(0,a.useEffect)((function(){return Be.F.addHandler(document,"keydown",f),function(){return Be.F.removeHandler(document,"keydown",f)}}),[f]),u?o().createElement("div",{className:Hi},o().createElement("div",{className:Gi},o().createElement(Jt.II,{onBlur:function(){setTimeout((function(){d(!1)}),200)},onChange:function(e,t){t&&c(t)},className:Wi,autoFocus:!0})),o().createElement("div",{className:Ki},e.filter((function(e){return e.name.includes(i)})).map((function(e,t){return o().createElement("div",{key:t,onClick:function(){return function(e){e.callback()}(e)},className:Qi},e.name)})))):null},Ji=n(78517),Yi=n(74785);function Xi(){var e=(0,i.useDispatch)(),t=(0,k.e)().currentProjectId;(0,a.useEffect)((function(){var n=null,r=null;if(t){var a=t;e(Je.x.loadAndSetExpandMap(a)),function(e,t){e(Je.x.setTreeLoading(!0)),$.Z.getFilesystemIndex(t).then((function(t){var n=(0,fr.ew)(t);e(Je.x.setTreeData(n)),e(Ji.f.filesystemIndexChanged(t,{type:Yi.U.LOAD,list:t}))})).catch((function(e){C.Z.handleErrorSingle("Error while loading directories: ".concat(e.message))})).finally((function(){e(Je.x.setTreeLoading(!1))}))}(e,a),$.Z.openSync(a),n=$.Z.onFileIndex((function(t){var n=t.indexes,r=t.detail,a=(0,fr.ew)(n);e(Je.x.setTreeData(a)),e(Ji.f.filesystemIndexChanged(n,r)),e(Je.x.setLoadingPath(null))})),r=$.Z.onFileContentChange((function(t){e(Ji.f.fileContentChange(t.uri))}))}return function(){t&&$.Z.closeSync(t),n&&n.dispose(),r&&r.dispose(),e(Je.x.setTreeData(null)),e(Ji.f.filesystemIndexChanged([],{type:Yi.U.CLEAR,list:[]}))}}),[t,e])}var $i=n(54230);var ec=n(64585),tc=n(53962),nc=n(70512),rc=n.p+"assets/2.0.0/static/media/Major.791b2a52.tmLanguage",ac=!1;function oc(){return(oc=(0,Z.Z)(I().mark((function e(){var t,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($i.languages.register({id:"motoko"}),!ac){e.next=3;break}return e.abrupt("return");case 3:return ac=!0,e.next=6,(0,ec.loadWASM)("https://cdn.jsdelivr.net/npm/onigasm@2.2.5/lib/onigasm.wasm");case 6:return t=new tc.Registry({getGrammarDefinition:function(){var e=(0,Z.Z)(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(rc);case 2:return e.next=4,e.sent.text();case 4:return e.t0=e.sent,e.abrupt("return",{format:"plist",content:e.t0});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),(n=new Map).set("motoko","source.mo"),e.next=11,(0,nc.p)($i,t,n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ic(){var e=(0,k.e)().currentProjectId,t=(0,Vn.v)(),n=(0,c.k6)(),o=(0,a.useRef)(),s=function(){var e=(0,c.TH)().search;if(e&&l.test(e)){var t=l.exec(e);if(t){var n=t[1];if(n){var a=n.split("&"),o={};return a.forEach((function(e){if(e&&e.indexOf("=")>-1){var t=e.split("="),n=(0,r.Z)(t,2),a=n[0],i=n[1];a&&i&&(o[a]=i)}})),o}}}return{}}(),u=s.open,d=s.type,f=(0,i.useDispatch)();(0,a.useEffect)((function(){!o.current&&u&&d&&e&&(function(e){return"file"===e||"preview"===e}(d)&&(0,ee.Vy)(e,u).then((function(t){if(t)if(function(e){return"file"===e}(d))f(Je.x.openAndFocus(e,u));else{var n=(0,ee.v3)(e,u);n.key="".concat(u,"_").concat(d),n.type=d,f(Ue.z.openTab(n))}})),o.current={currentProjectId:e,open:u,type:d})}),[f,e,u,d]);var m=(0,c.TH)().pathname;(0,a.useEffect)((function(){var r=function(e){if(!e)return;if(e.path&&("preview"===e.type||"file"===e.type))return{open:e.path,type:e.type};if("plugin"===e.type||"welcome"===e.type)return{open:e.key,type:e.type}}(t);if(r){var a=r.open,i=r.type;o.current={currentProjectId:e,open:a,type:i},n.replace("".concat(m,"?open=").concat(a,"&type=").concat(i))}else n.replace("".concat(m))}),[e,t,n,m]),(0,a.useEffect)((function(){f({type:Ue.J.LOAD_GROUPS,data:{}})}),[f,e])}var cc=n(20404),lc={},sc={},uc=function(){function e(t){var n=this;(0,f.Z)(this,e),this._languageId=void 0,this._loadingTriggered=void 0,this._lazyLoadPromise=void 0,this._lazyLoadPromiseResolve=void 0,this._lazyLoadPromiseReject=void 0,this._languageId=t,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((function(e,t){n._lazyLoadPromiseResolve=e,n._lazyLoadPromiseReject=t}))}return(0,m.Z)(e,[{key:"whenLoaded",value:function(){return this._lazyLoadPromise}},{key:"load",value:function(){var e=this;return this._loadingTriggered||(this._loadingTriggered=!0,lc[this._languageId].loader().then((function(t){return e._lazyLoadPromiseResolve(t)}),(function(t){return e._lazyLoadPromiseReject(t)}))),this._lazyLoadPromise}}],[{key:"getOrCreate",value:function(t){return sc[t]||(sc[t]=new e(t)),sc[t]}}]),e}();function dc(e){var t=e.id;lc[t]=e,$i.languages.register(e);var n=uc.getOrCreate(t);$i.languages.setMonarchTokensProvider(t,n.whenLoaded().then((function(e){return e.language}))),$i.languages.onLanguage(t,(function(){n.load().then((function(e){$i.languages.setLanguageConfiguration(t,e.conf)}))}))}dc({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:function(){return n.e(3808).then(n.bind(n,12872))}}),dc({id:"output",extensions:[".output"],aliases:["Output","output"],loader:function(){return n.e(4680).then(n.bind(n,54680))}}),setTimeout((function(){$i.editor.defineTheme("chainIdeEditTheme",{base:"vs-dark",inherit:!0,rules:[{token:"custom-info",foreground:"59a600"},{token:"custom-warn",foreground:"fab563"},{token:"custom-error",foreground:"cf0002",fontStyle:"bold"}],colors:{"editor.background":"#1B1C1E"}})}),0),function(){oc.apply(this,arguments)}();var fc={backgroundColor:(0,P.l6)(P.Zq.ALL_BACKGROUND)},mc=function(e){var t=/macintosh|mac os x/i.test(navigator.userAgent);e.keyCode==="S".charCodeAt(0)&&(t?e.metaKey:e.ctrlKey)&&e.preventDefault()};function pc(){(0,a.useEffect)((function(){return Be.F.addHandler(document,"keydown",mc),function(){return Be.F.removeHandler(document,"keydown",mc)}}),[]);var e=(0,i.useDispatch)(),t=(0,a.useCallback)((function(t){t.stopPropagation(),e(Je.x.clearFocus())}),[e]);Xi(),ic();var n=(0,k.e)().currentProjectId;return(0,a.useEffect)((function(){return $.Z.onFilesystemDidChange((function(t){if(t.deleted){var r=t.deleted;cc.Z.removeTabByFn((function(e){return!(e.path&&e.path.startsWith(r))}),n).then((function(){e({type:Ue.J.LOAD_GROUPS,data:{}})}))}if(t.moved){var a=t.moved;(function(e,t,n){return hc.apply(this,arguments)})(a.src,a.dest,n).then((function(){e({type:Ue.J.LOAD_GROUPS,data:{}})}))}})).dispose}),[n,e]),(0,bi.FW)(),o().createElement("div",{id:"chainideWorkspace",className:O,style:fc,onClick:t},o().createElement(Oi,null),o().createElement(z,null),o().createElement(Zo,null),o().createElement(So,null),o().createElement(zi,null),o().createElement(qi,null))}function hc(){return(hc=(0,Z.Z)(I().mark((function e(t,n,r){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,ee.zE)(t)){e.next=5;break}return e.next=3,cc.Z.everyTab((function(e){return e.path===t?(0,Te.ZP)(e,(function(e){e.key=e.key.replace(t,n),e.path=n,e.title=n})):e}),r);case 3:e.next=7;break;case 5:return e.next=7,cc.Z.everyTab((function(e){var r;return null!==e&&void 0!==e&&null!==(r=e.path)&&void 0!==r&&r.startsWith(t)?(0,Te.ZP)(e,(function(e){var r;e.key=e.key.replace(t,n),e.path=null===e||void 0===e||null===(r=e.path)||void 0===r?void 0:r.replace(t,n)})):e}),r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vc(){var e=s().id,t=(0,i.useDispatch)(),n=(0,u.D)();(0,a.useEffect)((function(){return function(){C.Z.clearOutput(w.O3.ALL)}}),[n]),function(){var e=(0,u.D)(),t=(0,i.useDispatch)();(0,a.useEffect)((function(){var e=g.w.onComponentChange((function(e){var n=E(e,y.M.RIGHT).map((function(e){return{id:e.componentId,name:e.name,iconName:e.iconName,content:e.componentFunc}}));t(v.q.setControls(n)),E(e,y.M.WELCOME).map((function(e){h.setWelcomePage(e.componentFunc)})),E(e,y.M.BOTTOM).map((function(e){t(d.R.addComponent({id:e.componentId,name:e.name,active:!1,content:e.componentFunc}))}))}));return function(){t(d.R.clearBottomComponents()),e.dispose()}}),[t]),(0,a.useEffect)((function(){g.w.clear()}),[e])}();var c=(0,xi.w)().userInfo,l=(0,k.e)(),f=l.currentLoaded,m=l.projects,p=l.currentProject,T=l.currentProjectId;(0,a.useEffect)((function(){if(c&&p&&"true"===p.anonymous){var e=p.id,n=void 0===e?"":e;q.B.anonymousTransfer2User(n).then((function(){C.Z.handleInfoSingle("The current project has been added to your account")})).catch((function(){C.Z.handleErrorSingle("Failed to add current project  to your account")})).finally((function(){t({type:b.v.INIT_CURRENT_PROJECT,data:n})}))}}),[c,p,t]),(0,a.useEffect)((function(){return t({type:b.v.INIT_CURRENT_PROJECT,data:e}),function(){t({type:b.v.CLEAR_CURRENT_PROJECT})}}),[t,e]);var I=(0,a.useRef)(!1),Z=(0,a.useState)(!1),P=(0,r.Z)(Z,2),O=P[0],S=P[1];return(0,a.useEffect)((function(){return I.current=!1,p&&p.pluginInfo?(x.qU.initialState(p.pluginInfo),x.EV.loadAllPlugins(n).then((function(){!function(){var e=localStorage.getItem("devPluginInfo");null!==e&&N.E.loadExternalPlugin(JSON.parse(e))}()})).catch((function(e){console.error(e)})).finally((function(){I.current=!0,S(!0)}))):(I.current=!0,S(!0)),function(){I.current&&x.EV.destroy()}}),[n,t,m,T,p]),(0,a.useEffect)((function(){f&&O?hideLoading__GLOBAL():showLoading__GLOBAL({loadingText:"Open Project",stepCount:3,currentStep:3,stepText:"Load Project Info..."})}),[f,O]),f&&O?o().createElement(pc,null):null}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(44615);function a(){return(0,r.useSelector)((function(e){return e.openTab}))}},98408:function(e,t,n){"use strict";n.d(t,{v:function(){return a},X:function(){return o}});var r=n(3433);function a(){var e=(0,r.Z)().tabGroups,t=e.groups,n=e.activeGroupKey,a=n&&t.find((function(e){return e.groupKey===n}))||t[0];if(a&&a.tabs){var o=a.tabs,i=a.activeTabKey;return i&&o.find((function(e){return e.key===i}))||o[0]}}function o(){var e=a();if(e&&"file"===e.type)return e.path}},78585:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var r=n(44615);function a(){return(0,r.useSelector)((function(e){return e.panes}))}},88153:function(e,t,n){e.exports=n.p+"assets/2.0.0/static/assets/c-back-logo.392e6ba0.png"},67826:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAvCAYAAAB6zDPWAAAHVklEQVRYhc2ZC6xeUxbHf/ej+i6qrZa2tB5tpIpSjEc9Sj2GomjuaBgTE8kMZoZQjUE9ZrSeEUQUrWAarxHMDENmiM5QghFUqRbVy1Cuhj6uttrevyz5n8y6X+7ju7e3vbOSnXPO2nuvvfbea+291v9USWIjqC8wBNgVGAkMBfoD3YEqoB6oA2qBj4B5wIfAJ8DS1g67ZRv07AyMAk4HTgIGt1LOeuC/wDPAI8DrwHeVdGzNysZKHQlM8bOU6kLIVy6rgDVWKibR1Su9PdCvEblzgWnA34ENzWoQylZQBkq6Tw1pvaT3JN0j6RRJO0nqJamzpJJlxrOLpK0l7ex2MyTNd/9Mf5a0a3O6VKLoEZIWJaH1kl6SdLqkbhVOtrx0lXSq5dQn2TWSjmmqX0tmUA3cDfT096fAVOB+O09B4VSDgO2AAUBvm8lqm0atyxJgZZlpnQlcA+xkXtSfAzzWGjOolrQmzfpZSUNSfQ+vQpjHV2qZYgXflTRV0l7JVLCJPJMkrJB0YqUrOxZ4HNja3/cB53mlYsVOAK4C9nH9OuAD4GOv/lI7WE+v+EBgGLCD22/wSXAdMN+8cMS7gLP8vRg4znKbXNldJH2QZjlL0hau6yfpgVS3RNJ1kvaXtIek0ZIOlnSYpDF+D94IO+Dxkp6UtNb9l0v6VRo7bPmxJP8JSVVNOVgo9XBq/LfkRMMlvWF+mMc08w6XNFPSsmYM4XtJL0v6haTBkg6U9EKqvykpNUjSvFRX3ZSyZ6ZG73s1gr+bpHfMj5NhnKRDJb1q3gZJCyQ9JGmKpLMlTZJ0vqQ7JL3iVQxaJeliSX0kXZPGuzbpcVI6Jf7t47CBsgPT9sfKnWx+Hx8xQa9L2k/SlWnF4twclUylqdJf0u8kLXTfuTa5c5PCZ6T2hTmE0j8tV/ai1On+xJ+RVjTs73Z/vy3pJ204Y3tLutcyFvoiuNbfsTvbu90475i8Y+RZL3BFrY+W4E8wb62Pkqv8/Q9Jfdt4IRRlqmWFLe+Z/OEPrt/WN5284/2KjqekVX3IvO7e9qDpkib6/TWfChujKD5nb5VUJ+lnttMVdupObvN7Sd/Y4fYpOs5OjlJcd4VyseJjJS224FHtoGhRQqkBnnwn+0e8b+n6Lt7BMI1u2ONrkh12ccPnzItz9HK/X9GOira6lByP9vcd8Z7Duz2AI4BvgLeAc4HPfMN0GIWyuwGdrMAcP0eb9wbQw1fmkw5GOowiON7Tg38PvO33b4FHgaeAceY90pGK/kiSnrI91vhiyLbUy4611MbfYfZa2Gwf613nqCpT1O3omHRl01PePBTK9vJIaxzqZepu210OrP1/ULaz3+vLon+S463fzHo1SqWUUVa5ZCqUL1UmbtMrW+f3rRrJ/1c7ze7eRoyhXankgz+oWzKJglbYXrdzfYcr+4Xft3FWim+v3wK7A+84h+rfjJzNQqHsQg+0rZO6oEOAW50kvmATGLuJFSoln2nMf6pKjgcKOtDPuX4OS9nnxEYEtAcFqPe8M93DfOXPALaw7BuBN4GZoWxNcrL9/JzvdHqkL4YQdjhw6CZQ9mRjZ3HGHwuM8UW03qZX7ZR/35LhxyXuuLuDllD0CfPCfmf5/cp09rYHBQpzicf/p1FJUhyyiwG9oMWh7NfAc2aEI03w+2w/T/Pt9ifb7eR2VPYKI4vTrfhwYJHhULyb/4sIHSSMTajeSwnaedC85w1kFJnpL9shMLnMsmYblipywCmuD+TxLfMCnhpedOzp3L5IfSeaP8IRV9D1Rlg+8/flKVdqTQnQ5GbLeNHR3G3+fsWRXrQbn/LCwMGq8iDVqfK11CnzLzVM9Ka//yPphJQztZQgjjemK+OxMdnJ/q717hUTejHlhZFMNsANAhWckxSbluouTfw/OnWfnniLjC9ElrqvpKGGiUY6nQ9U5kO3jbT+PMu9OvFOS+Odk2Q/WwAo5bM/StJqN/qumJHL5CTgaUl7Sxpm5WvVkNYZrclUaySnr5PUv7iuzlATyfQ+dd23Nj0aU5Yy/KnGK1XUhS1/4bpVhugPMBY22ijhBUZYphvTGu/0fZDRl5uMDwR9bOcu5PdN2y8DITSnbMCOj6cO7yeEBm/xrATtrHMKH5DTb4zcjDFSeKSkn9uBXk27Vm+zyWlUIDB/TeOGDlu1pCy2yWy/scLHljlLmMENkj5X5bTMWNneZeMNKYNA5zSG+jT3TyFQ6gd9FeKL4Rb/BlqV2vXzz7q4bUYYh+jtcHO58YZ3gQU+8D8vG2eC7/+h/v4XMMn9GlILx8023vJM8+ytPTbyUtjfKPi6JPvR5rLoSoRW+cb6MgmtN7J3p6Sj7RgtXRBdjcf+2lu+MsmL90taOq9b84cxtulC4GyjNAVtcOQWwc8yB/NFNtzFUdsAPwen1B+nTBEwXe0gv1lqy4/mYQ5uJhl6aktuFsFToD0z/e+2oux5Y/6KR2YRIeVewEHAzsYg4hdROFeROccKh0PGqkcQ/bIdLnajcgJ+ABruuUY9O5hmAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=870.710ead15.chunk.js.map