(self.webpackChunkchainide=self.webpackChunkchainide||[]).push([[4404,2526],{4451:function(t,n,e){"use strict";e.d(n,{V:function(){return l}});var i,r=e(97296),a=e(95764),o=e(57994),c=e(98907),u=e(34902),s=e(44586);!function(t){t.CHANGE="change",t.CLEAR="clear"}(i||(i={}));var l=new(function(){function t(){(0,o.Z)(this,t),this._commands=void 0,this._commandChange=new u.Emitter,this.onCommandChange=this._commandChange.event,this._commands=[]}return(0,c.Z)(t,[{key:"registerCommand",value:function(t){if(t instanceof Array){var n=t.map((function(t){return(0,a.Z)({id:(0,s.Z)()},t)}));return this._commands=[].concat((0,r.Z)(this._commands),(0,r.Z)(n)),this._commandChange.fire({type:i.CHANGE,data:n}),n}var e=(0,s.Z)(),o=(0,a.Z)({id:e},t);return this._commands.push(o),this._commandChange.fire({type:i.CHANGE,data:[o]}),[o]}},{key:"remove",value:function(t){return this._commands=this._commands.filter((function(n){return n.id!==t})),this._commandChange.fire({type:i.CHANGE,data:this._commands}),this._commands}},{key:"getCommandsBy",value:function(t){return this._commands.filter((function(n){return n.name.includes(t)}))}},{key:"clear",value:function(){this._commands=[],this._commandChange.fire({type:i.CLEAR,data:this._commands})}}]),t}())},98067:function(t,n,e){"use strict";e.r(n),e.d(n,{pluginConfig:function(){return A}});var i,r,a,o=e(50872),c=e(25867),u=e(95764),s=e(57994),l=e(98907),f=e(48764),d=e(92772),h=e(78655),v=e(42950),p=e.n(v),g=e(50361),m=e.n(g);function y(t,n,e){var i=n,r=!1,a="Error encoding arguments: Error: invalid ".concat(t," value");switch(!0){case t.includes("bool"):["true","false",!0,!1].includes(n)||(r=!0);break;case t.includes("address"):e.utils.isAddress(n)||(r=!0);break;case t.includes("[]"):try{if(i=JSON.parse(n),Array.isArray(i)){var o=t.replace("[]","");i.forEach((function(t){e.eth.abi.decodeParameter(o,t)}))}else r=!0}catch(c){r=!0}break;case t.includes("unit"):case t.includes("bytes"):try{e.eth.abi.decodeParameter(t,n)}catch(c){r=!0}}if(r)throw a;return i}!function(t){t.TRANSACTION_ERROR="transactionError",t.TRANSACTION_HASH="transactionHash",t.RECEIPT="receipt",t.CONFIRMATION="confirmation"}(i||(i={})),function(t){t.PENDING="pending",t.SUCCESS="success",t.ERROR="error"}(r||(r={})),function(t){t.GET_TRANSACTION_ERROR="get/transactionError",t.SEND_TRANSACTION_HASH="send/transactionHash",t.SEND_RECEIPT="send/receipt",t.SEND_CONFIRMATION="send/confirmation",t.CALL_RESULT="call/result"}(a||(a={}));var C=e(63804),w=e.n(C),E=e(27196),_=e.n(E),k=new(function(){function t(){var n=this;(0,s.Z)(this,t),this.getProvider=function(){return n.provider},this.getDevkitVm=function(){return n.devkitVm},this._response=function(t){if(n._cbMap[t.id]){var e=n._cbMap[t.id];delete n._cbMap[t.id],e(t.data)}},this.queue=function(t,e){var i=++n._counter;n._cbMap[i]=e,n._queue.push({data:t,id:i})},this.isLoaded=function(){return n.ref&&n.ref.contentWindow&&n.ref.contentWindow.queueMessage},this.isReady=function(){return n.isLoaded()&&n.ref.contentWindow.queueMessageReply},this._processQueue=function(){n._processBusy||(n._processBusy=!0,n.isReady()&&n._queue.length>0&&n.ref.contentWindow.queueMessage(n._queue.pop()),n._processBusy=!1)},this.id=Math.random().toString(36).substr(2,16)+"_evm",this._queue=[],this.ref=null,this._counter=0,this._cbMap={}}return(0,l.Z)(t,[{key:"init",value:function(){var t=this;_().render(w().createElement("div",{style:{display:"none"},id:this.id},w().createElement("iframe",{ref:function(n){var e;t.ref=n,(e=function(){t.isLoaded()?t.ref.contentWindow.queueMessageReply=t._response:setTimeout(e,100)})()},srcDoc:'<html>\n    <body>\n        <script type="text/javascript" src="https://chainide-static-resource.s3.us-west-2.amazonaws.com/evm-iframe-bundle.js"><\/script>\n        <script type="text/javascript">\n            console.log("[VM] loaded v10.");\n        <\/script>\n    </body>\n</html>'})),document.getElementById("evm")),this.queue({},(function(n){t.devkitVm=n.devkitVm,t.provider=new t.devkitVm.Provider(t.devkitVm),t.devkitVm.setBalance("0xa48f2e0be8ab5a04a5eb1f86ead1923f03a207fd","0x56bc75e2d63100000")})),setInterval(this._processQueue,100)}}]),t}()),I=function(){function t(){var n=this;(0,s.Z)(this,t),this.web3=void 0,this._devkitVm=void 0,this.accounts=[],this.network="Evm Default Network",this.bufferKeys={},this._gasPrice="0x3B9ACA00",this._gasLimit="0x2DC6C0",this.init=function(){return new Promise((function(t,n){var e=0;(function n(){!k.getProvider()&&e<50?(setTimeout((function(){n()}),500),e+=1):t()}(),e>50)&&n(new Error("EVM \u521d\u59cb\u5316\u5931\u8d25"))}))},this.createAccount=function(){if(n._devkitVm){var t="0x0",e=n.web3.eth.accounts.create(),i=e.address,r=e.privateKey;n._devkitVm.setBalance(i,"0x56bc75e2d63100000"),n._devkitVm.getBalance(i,(function(n,e){n&&(t="0x0"),t=e}));var a={address:i,balance:parseInt(t,16)},o=f.Buffer.from(r.replace("0x",""),"hex");n.accounts.push(a),n.bufferKeys[i]=o}},this.fetchNetwork=function(){return new Promise((function(t,e){n._devkitVm?t(n.network):e(new Error("EVM is not initialized"))}))},this.fetchAccount=function(){return new Promise((function(t,e){n._devkitVm?t(n.accounts):e(new Error("EVM is not initialized"))}))},this.connectWeb3Service=function(){},this.deployContract=function(t){return d.y.create((function(e){var r=t.solcCompiledOutput.abi,a=[];try{a=function(t,n,e){var i=[];return t.abi.forEach((function(t){"constructor"===t.type&&t.inputs.forEach((function(t){var r=y(t.type,n[t.name],e);i.push(r)}))})),i}(t.solcCompiledOutput,t.constructorArgs,n.web3)}catch(u){e.error(u)}var o,c=new n.web3.eth.Contract(m()(r));try{o=c.deploy({data:t.solcCompiledOutput.evm.bytecode.object,arguments:a})}catch(s){e.error(s)}n.getNonce(t.account.address).then((function(e){var i,r,a={nonce:n.web3.utils.toHex(e),value:"0x00",data:o.encodeABI(),from:t.account.address,gasLimit:n.web3.utils.toHex(t.deployOptions.gasLimit),gasPrice:n.web3.utils.toHex((i=t.deployOptions.value,r=t.deployOptions.unit,i*{wei:1,gwei:1e9}[r]).toString())},c=new h.YW(a);return c.sign(n.bufferKeys[t.account.address]),c})).then((function(t){return n.sendInternalTransaction(t)})).then((function(t){e.next({type:i.TRANSACTION_HASH,data:{transactionHash:t.hash}});var r=t.hash;n.getReceipt(r).then((function(t){null==t||null==t.blockHash?n.getReceipt(r):(e.next({type:i.RECEIPT,data:{receipt:t}}),e.complete())})).catch((function(t){e.next({type:i.TRANSACTION_ERROR,data:{transactionHash:r}}),e.error(t)}))})).catch((function(t){return e.error(t)}))}))},this.interactContract=function(t){return d.y.create((function(e){var i,r=t.abi,o=t.abiEntryIdx,c=t.accountAddress,s=t.interactArgs,l=t.contractAddress,f=t.payableValue,d=r[o],v=[],p=d.name;d.inputs.forEach((function(t){v.push(y(t.type,s[t.name],n.web3))}));var g=new n.web3.eth.Contract(r,l),m={value:f||"0x00",data:(0===v.length?g.methods[p]():(i=g.methods)[p].apply(i,v)).encodeABI(),from:c,to:l,gasPrice:n._gasPrice,gasLimit:n._gasLimit,nonce:"0x0"};"pure"===d.stateMutability||"view"===d.stateMutability?n.getNonce(c).then((function(t){m=(0,u.Z)((0,u.Z)({},m),{},{nonce:n.stringToHex(t)}),n.call(m).then((function(t){e.next({type:a.CALL_RESULT,data:t})})).catch((function(t){return e.error(t)}))})):n.getNonce(c).then((function(t){m=(0,u.Z)((0,u.Z)({},m),{},{nonce:n.stringToHex(t)});var e=new h.YW(m);return e.sign(n.bufferKeys[c]),e})).then((function(t){return n.sendInternalTransaction(t)})).then((function(t){var i=t.hash;e.next({type:a.SEND_TRANSACTION_HASH,data:{hash:i}}),n.getReceipt(i).then((function(t){null==t||null==t.blockHash?n.getReceipt(i):(e.next({type:a.SEND_RECEIPT,data:{receipt:t}}),e.complete())})).catch((function(t){e.next({type:a.GET_TRANSACTION_ERROR,data:{hash:i}}),e.error(t)}))})).catch((function(t){return e.error(t)}))}))},k.init();var e=0;!function t(){if(!k.getProvider()&&e<50)setTimeout((function(){t()}),500),e+=1;else{var i=k.getProvider();n.web3=new(p())(i),n._devkitVm=k.getDevkitVm(),n.network="Evm Default Network",n.createAccount()}}()}return(0,l.Z)(t,[{key:"devkitVm",get:function(){return this._devkitVm}},{key:"stringToHex",value:function(t){return this.web3.utils.toHex(t)}},{key:"getNonce",value:function(t){var n=this;return new Promise((function(e,i){n._devkitVm.getTransactionCount(t,(function(n,r){null==n?e(r):i("Could not get nonce for address ".concat(t,"."))}))}))}},{key:"sendInternalTransaction",value:function(t){var n=this;return new Promise((function(e,i){n._devkitVm.sendRawTransaction("0x".concat(t.serialize().toString("hex")),(function(n,r){n?i(n):e({hash:r,tx:t})}))}))}},{key:"getReceipt",value:function(t){var n=this;return new Promise((function(e){e(n._devkitVm.getTransactionReceipt(t))}))}},{key:"call",value:function(t){var n=this;return new Promise((function(e,i){n._devkitVm.call(t,(function(t,n){t?i(t):e(n)}))}))}}],[{key:"getInstance",value:function(){return this.instance instanceof this===!1&&(this.instance=new this),this.instance}},{key:"destroyInstance",value:function(){this.instance=null}}]),t}();I.pluginId="EvmWalletPlugin",I.instance=void 0;var A={activate:function(t){var n=I.getInstance(),e=o.Z.registerWallet({walletId:I.pluginId,init:n.init,deploy:n.deployContract,interact:n.interactContract,fetchNetWork:n.fetchNetwork,fetchAccount:n.fetchAccount});t.subscriptions.push(e)},deactivate:function(t){},store:{},context:{subscriptions:[]},config:{pluginId:I.pluginId,version:"0.0.1",type:c.zV.server,active:!1,description:{title:"EvmWalletPlugin",icon:"#CommentSolid",description:"EvmWalletPlugin"}}}},85153:function(t,n,e){"use strict";e.d(n,{vo:function(){return C},MX:function(){return w},Dz:function(){return p}});var i=e(95550),r=e.n(i),a=e(85358),o=e(63804),c=e(48706),u=e(9307),s=e(76515),l=e(83112),f=e(54516),d=e(44615),h=e(29833),v=e(25720);function p(){var t=(0,l.Z)(),n=(0,d.useDispatch)(),e=(0,f.v)().walletInstData,i=(0,o.useCallback)((0,a.Z)(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c.z$.wallet){t.next=8;break}return e={currentChainID:"",currentAccounts:[],isBrowserWalletExist:""},t.next=4,c.z$.wallet.fetchNetWork().then((function(t){e.currentChainID=t})).catch((function(t){s.Z.handleErrorSingle("Error while fetch network: ".concat(t.message))}));case 4:return t.next=6,c.z$.wallet.fetchAccount().then((function(t){e.currentAccounts=t})).catch((function(t){s.Z.handleErrorSingle("Error while fetch account: ".concat(t.message))}));case 6:n({type:h.TQ.SET_WALLET_DATA,data:e}),n({type:h.TQ.SET_WALLET_LOADING,data:!1});case 8:case"end":return t.stop()}}),t)}))),[n]);return(0,o.useEffect)((function(){var e=c.z$.onWalletChange((function(e){switch(e.type){case u.vN.Error:case u.vN.UNLOAD:n({type:h.TQ.SET_WALLET_DATA,data:{currentChainID:"",currentAccounts:[],isBrowserWalletExist:e.data.message||t.formatMessage({id:"noWallet"})}}),n({type:h.TQ.SET_WALLET_LOADING,data:!1});break;case u.vN.ON_ACCOUNT_CHANGE:case u.vN.ON_CHAIN_CHANGE:case u.vN.LOAD:i();break;case u.vN.PROVIDER_DISCONNECT:s.Z.handleWarn([{source:v.O3.ALL,msg:"network disconnect, ".concat(e.data.message)}]);break;default:i()}}));return function(){e.dispose()}}),[n,i,t,e.currentChainID]),e}var g=e(12721),m={ethereum:[{name:"Metamask",iconPath:e(51875),loadParams:{library:"MetamaskWallet",url:"https://cdn.jsdelivr.net/npm/@white-matrix/metamask-wallet-service@1.0.11"},pluginId:"MetamaskWallet"}],binance:[{name:"Metamask",iconPath:e(51875),loadParams:{library:"MetamaskWallet",url:"https://cdn.jsdelivr.net/npm/@white-matrix/metamask-wallet-service@1.0.11"},pluginId:"MetamaskWallet"},{name:"BinanceWallet",iconPath:e(56167),loadParams:{library:"BinanceWallet",url:"https://cdn.jsdelivr.net/npm/@white-matrix/binance-wallet-service@latest"},pluginId:"BinanceWallet"}]},y=["ethereum","binance"];function C(){var t=(0,g.D)();return m[t]}function w(){var t=(0,g.D)();return y.includes(t)}},48706:function(t,n,e){"use strict";e.d(n,{Dz:function(){return l.Dz},z$:function(){return f}});var i=e(57994),r=e(98907),a=e(33021),o=e(34902),c=e(76515),u=e(9307),s=function(){function t(){(0,i.Z)(this,t),this._wallet=void 0,this._walletProvider=void 0,this._walletChange=new o.Emitter,this.onWalletChange=this._walletChange.event,this._wallet=null}return(0,r.Z)(t,[{key:"registerWallet",value:function(t){var n=this;this.wallet&&a.EV.deactivate(this.wallet.walletId),this._wallet=t,this._wallet.init().then((function(){t.walletProvider&&(n._walletProvider=t.walletProvider,n.watchProvider()),n._walletChange.fire({type:u.vN.LOAD,data:t})})).catch((function(e){n._walletChange.fire({type:u.vN.Error,data:e}),c.Z.handleErrorSingle('Failed to initialize wallet plugin "'.concat(t.walletId,'"'))}))}},{key:"wallet",get:function(){return this._wallet}},{key:"watchProvider",value:function(){var t=this;this._walletProvider.on("disconnect",(function(n){t._walletChange.fire({type:u.vN.PROVIDER_DISCONNECT,data:n})})),this._walletProvider.on("chainChanged",(function(){t._walletChange.fire({type:u.vN.ON_CHAIN_CHANGE})})),this._walletProvider.on("accountsChanged",(function(){t._walletChange.fire({type:u.vN.ON_ACCOUNT_CHANGE})}))}},{key:"dispose",value:function(){this._wallet=null,this._walletChange.fire({type:u.vN.UNLOAD,data:{}})}}]),t}(),l=e(85153),f=new s},9307:function(t,n,e){"use strict";e.d(n,{vN:function(){return r},fy:function(){return a},my:function(){return c}});var i,r,a,o=e(16798);!function(t){t.LOAD="load",t.Error="error",t.UNLOAD="unload",t.ON_ACCOUNT_CHANGE="walletPlugin.onAccountChange",t.ON_CHAIN_CHANGE="walletPlugin.onChainChange",t.PROVIDER_DISCONNECT="PROVIDER_DISCONNECT"}(r||(r={})),function(t){t.EvmWalletPlugin="EvmWalletPlugin",t.MetamaskWallet="MetamaskWallet",t.BinanceWallet="BinanceWallet"}(a||(a={}));var c=(i={},(0,o.Z)(i,a.EvmWalletPlugin,"JavaScript VM"),(0,o.Z)(i,a.MetamaskWallet,"Metamask"),(0,o.Z)(i,a.BinanceWallet,"BinanceWallet"),i)},50872:function(t,n,e){"use strict";e.d(n,{C:function(){return g},Z:function(){return y}});var i=e(95764),r=e(57994),a=e(98907),o=e(44586),c=e(87876),u=e(34902),s=new(function(){function t(){(0,r.Z)(this,t),this._functions=void 0,this._functionChange=new u.Emitter,this.onFunctionChange=this._functionChange.event,this._functions=[]}return(0,a.Z)(t,[{key:"register",value:function(t){this._functions.find((function(n){return n.name===t.name}))||this._functions.push(t)}},{key:"remove",value:function(t){this._functions=this._functions.filter((function(n){return n.name!==t}))}},{key:"getApiFunction",value:function(t){var n=this._functions.find((function(n){return n.name===t}));return n?n.function:function(){return console.error("function is not found")}}},{key:"clear",value:function(){this._functions=[]}}]),t}()),l=e(48706),f=e(25867),d=e(76979),h=e(60994),v=e(65171),p=function(){function t(){(0,r.Z)(this,t)}return(0,a.Z)(t,[{key:"addReactComponent",value:function(t,n){var e=t.componentId||(0,o.Z)();return{priority:0,active:function(){try{h.w.addComponents((0,i.Z)((0,i.Z)({},t),{},{componentId:e}))&&n&&n()}catch(r){throw new Error("load component failed: ".concat(r))}},dispose:function(){h.w.removeComponents(e)}}}},{key:"addControl",value:function(t,n){return this.addReactComponent((0,i.Z)({position:f.Mi.RIGHT},t),n)}},{key:"setWelcomePage",value:function(t,n){return this.addReactComponent((0,i.Z)({position:f.Mi.WELCOME},t),n)}},{key:"setWalletView",value:function(t,n){return this.addReactComponent((0,i.Z)({position:f.Mi.BOTTOM},t),n)}},{key:"registerCommand",value:function(t,n){var e=[];return{priority:99,active:function(){try{e=h.w.addCommand(t),n&&n()}catch(i){throw new Error("register command failed: ".concat(i))}},dispose:function(){e.length>0&&h.w.removeCommand(e)}}}},{key:"registerFunction",value:function(t,n){return{priority:100,active:function(){try{s.register(t),n&&n()}catch(e){throw new Error("register function failed: ".concat(e))}},dispose:function(){s.remove(t.name)}}}},{key:"getApiFunction",value:function(t){return s.getApiFunction(t)}},{key:"registerWallet",value:function(t){return{priority:0,active:function(){l.z$.registerWallet(t)},dispose:function(){l.z$.dispose()}}}},{key:"addModule",value:function(t,n){(0,d.W)(t,n)}},{key:"fileSystemService",get:function(){return c.Z}},{key:"currentProject",get:function(){return v.q.currentProjectPlugins}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}}]),t}();p.instance=void 0;var g=p.getInstance(),m=new Proxy(g,{get:function(t,n){return n in t?t[n]:new Error("function is not found!")},set:function(){return console.warn("Can't modify chainIDE implement!"),!1}});window.System.set("app:chainIDE",{chainIDEProxyImpl:m}),window.System.import("chainIDE");var y=m},60994:function(t,n,e){"use strict";e.d(n,{w:function(){return s}});var i=e(97296),r=e(57994),a=e(98907),o=e(4451),c=e(34902),u=function(){function t(){(0,r.Z)(this,t),this.state=void 0,this.components=void 0,this.componentEmitter=new c.Emitter,this.onComponentChange=this.componentEmitter.event,this.components=[],this.state={}}return(0,a.Z)(t,[{key:"addComponents",value:function(t){return!this.components.find((function(n){return n.componentId===t.componentId}))&&(this.components.push(t),this.componentEmitter.fire((0,i.Z)(this.components)),!0)}},{key:"removeComponents",value:function(t){this.components=this.components.filter((function(n){return n.componentId!==t})),this.componentEmitter.fire((0,i.Z)(this.components))}},{key:"getComponent",value:function(t){var n=this.components.find((function(n){return n.componentId===t}));return n?n.componentFunc():null}},{key:"addCommand",value:function(t){return o.V.registerCommand(t)}},{key:"removeCommand",value:function(t){t.map((function(t){o.V.remove(t.id)}))}},{key:"clear",value:function(){this.state={},this.components=[],o.V.clear(),this.componentEmitter.fire([])}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}}]),t}();u.instance=void 0;var s=u.getInstance()},33021:function(t,n,e){"use strict";e.d(n,{EV:function(){return i.E},qU:function(){return i.q},i:function(){return r.i}});var i=e(65171),r=e(25867)},65171:function(t,n,e){"use strict";e.d(n,{E:function(){return _},q:function(){return k}});var i=e(95764),r=e(47427),a=e(95550),o=e.n(a),c=e(85358),u=e(57994),s=e(98907),l=e(50872),f=e(40768),d=e(34902),h=e(76515);function v(t){return new Promise((function(n,e){var i=t.url;window.System.import(i).then((function(t){try{n(t)}catch(i){e(i)}}))}))}var p=e(25867),g=e(33021),m=function(){function t(){(0,u.Z)(this,t),this._pluginConfigurations=new Map,this._plugins=new Map,this._extensionEmitter=new d.Emitter,this.onExtensionChange=this._extensionEmitter.event}return(0,s.Z)(t,[{key:"plugins",get:function(){return Array.from(this._plugins.values())}},{key:"loadBuildInPlugin",value:function(t){var n=t.config,e=n.pluginId,i=n.active;this.setPlugin(t),i?this.activate(e):this.deactivate(e),this._extensionEmitter.fire({type:p.i.LOAD,data:t})}},{key:"loadExternalPlugin",value:function(){var t=(0,c.Z)(o().mark((function t(n,e){var i,r,a,c,u,s=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.url,t.prev=1,t.next=4,v({url:i});case 4:if(r=t.sent,a=r.config,c=a.pluginId,u=a.active,!this._plugins.has(c)){t.next=8;break}throw Error("plugin is already load");case 8:r.config.libraryInfo={url:i},this.setPlugin(r),e||this._extensionEmitter.fire({type:p.i.LOAD,data:r}),setTimeout((function(){e?e.active?s.activate(c):s.deactivate(c):u?s.activate(c):s.deactivate(c)}),0),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),h.Z.handleErrorSingle("Error while load external plugin: ".concat(t.t0.message));case 17:case"end":return t.stop()}}),t,this,[[1,14]])})));return function(n,e){return t.apply(this,arguments)}}()},{key:"loadAllPlugins",value:function(){var t=(0,c.Z)(o().mark((function t(n){var e,i,a,c,u,s,l,d,v,p;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=(0,f.Hq)(n),t.prev=1,i=(0,r.Z)(e),t.prev=3,i.s();case 5:if((a=i.n()).done){t.next=13;break}return c=a.value.pluginSource,t.next=9,c;case 9:u=t.sent,this.loadBuildInPlugin(u.pluginConfig);case 11:t.next=5;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),i.e(t.t0);case 18:return t.prev=18,i.f(),t.finish(18);case 21:s=g.qU.currentProjectPlugins,l=0,d=Object.keys(s.pluginsConfigs);case 23:if(!(l<d.length)){t.next=32;break}if(v=d[l],!(p=s.pluginsConfigs[v]).libraryInfo){t.next=29;break}return t.next=29,this.loadExternalPlugin(p.libraryInfo,p);case 29:l++,t.next=23;break;case 32:t.next=37;break;case 34:t.prev=34,t.t1=t.catch(1),h.Z.handleErrorSingle("Error while load all plugin: ".concat(t.t1.message));case 37:case"end":return t.stop()}}),t,this,[[1,34],[3,15,18,21]])})));return function(n){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){var t=this;this._plugins.forEach((function(n){t.deactivate(n.config.pluginId,!0),t.unload(n.config.pluginId,!0)})),this._extensionEmitter.fire({type:p.i.DESTROY,data:{}})}},{key:"unload",value:function(t,n){var e=this._plugins.get(t);e?(this.deactivate(t),this._plugins.delete(e.config.pluginId),this._pluginConfigurations.delete(e.config.pluginId),!n&&this._extensionEmitter.fire({type:p.i.UNLOAD,data:e})):h.Z.handleErrorSingle("Plugin NotFound")}},{key:"setPlugin",value:function(t){this._plugins.set(t.config.pluginId,(0,i.Z)((0,i.Z)({},t),{},{context:{subscriptions:[]}}))}},{key:"setConfiguration",value:function(t){this._pluginConfigurations.set(t.pluginId,t)}},{key:"configurations",get:function(){return Array.from(this._pluginConfigurations.values())}},{key:"activate",value:function(t){var n=this._plugins.get(t);n?(this.setConfiguration((0,i.Z)((0,i.Z)({},n.config),{},{active:!0})),n.activate(n.context,l.C),n.context.subscriptions.sort((function(t,n){return n.priority-t.priority})).map((function(t){return t.active()})),this._extensionEmitter.fire({type:p.i.ACTIVATE,data:n})):h.Z.handleErrorSingle("Plugin NotFound")}},{key:"deactivate",value:function(t,n){var e=this._plugins.get(t);e?(!n&&this.setConfiguration((0,i.Z)((0,i.Z)({},e.config),{},{active:!1})),e.deactivate(e.context,l.C),this.unSubscript(e),!n&&this._extensionEmitter.fire({type:p.i.DEACTIVATE,data:e})):h.Z.handleErrorSingle("Plugin NotFound")}},{key:"unSubscript",value:function(t){t.context.subscriptions.map((function(t){return t.dispose()})),t.context.subscriptions=[]}}]),t}(),y=e(64941),C=e(50361),w=e.n(C),E=function(){function t(n){var e=this;(0,u.Z)(this,t),this.currentPluginConfigurations={currentProjectId:"",pluginsConfigs:{}},n.onExtensionChange((function(t){switch(t.type){case g.i.LOAD:e.load(t.data.config);break;case g.i.UNLOAD:e.unload(t.data.config);break;case g.i.ACTIVATE:e.activate(t.data.config);break;case g.i.DEACTIVATE:e.deactivate(t.data.config);break;case g.i.DESTROY:e.destroy()}}))}return(0,s.Z)(t,[{key:"initialState",value:function(t){this.currentPluginConfigurations=w()(t)}},{key:"destroy",value:function(){this.currentPluginConfigurations={currentProjectId:"",pluginsConfigs:{}}}},{key:"load",value:function(t){this.currentPluginConfigurations.pluginsConfigs[t.pluginId]||(this.currentPluginConfigurations.pluginsConfigs[t.pluginId]=t),this.currentPluginConfigurations.currentProjectId&&(0,y.KI)(t,this.currentPluginConfigurations.currentProjectId)}},{key:"unload",value:function(t){this.currentPluginConfigurations.pluginsConfigs[t.pluginId]&&delete this.currentPluginConfigurations.pluginsConfigs[t.pluginId],this.currentPluginConfigurations.currentProjectId&&(0,y.XT)(t,this.currentPluginConfigurations.currentProjectId)}},{key:"activate",value:function(t){this.currentPluginConfigurations.pluginsConfigs[t.pluginId]=(0,i.Z)((0,i.Z)({},t),{},{active:!0}),this.currentPluginConfigurations.currentProjectId&&(0,y.KI)((0,i.Z)((0,i.Z)({},t),{},{active:!0}),this.currentPluginConfigurations.currentProjectId)}},{key:"deactivate",value:function(t){this.currentPluginConfigurations.pluginsConfigs[t.pluginId]=(0,i.Z)((0,i.Z)({},t),{},{active:!1}),this.currentPluginConfigurations.currentProjectId&&(0,y.KI)((0,i.Z)((0,i.Z)({},t),{},{active:!1}),this.currentPluginConfigurations.currentProjectId)}},{key:"currentProjectPlugins",get:function(){return this.currentPluginConfigurations}}]),t}(),_=new m,k=new E(_)},8234:function(t,n,e){"use strict";var i;e.d(n,{M:function(){return i}}),function(t){t.LEFT="left",t.BOTTOM="bottom",t.RIGHT="right",t.CENTER="center",t.WELCOME="welcome"}(i||(i={}))},25867:function(t,n,e){"use strict";var i,r;e.d(n,{Mi:function(){return a.M},i:function(){return r},zV:function(){return i}}),function(t){t.view="view",t.server="server"}(i||(i={})),function(t){t.LOAD="load",t.UNLOAD="unload",t.ACTIVATE="activate",t.DEACTIVATE="deactivate",t.DESTROY="destroy"}(r||(r={}));var a=e(8234)},64941:function(t,n,e){"use strict";e.d(n,{XT:function(){return f},bh:function(){return r},KI:function(){return s}});Object.freeze([]);e(76979);var i=null,r=function(){return null===i&&(i=function(){var t=window;if(t.store)return t.store;throw new Error("Store has not been initialized")}()),i},a=e(95550),o=e.n(a),c=e(85358),u=e(94938);function s(t,n){return l.apply(this,arguments)}function l(){return(l=(0,c.Z)(o().mark((function t(n,e){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,u.ZP)("/workspace/updatePluginInfo",{method:"put",requestType:"json",data:{workspaceId:e,pluginName:n.pluginId,url:(null===(i=n.libraryInfo)||void 0===i?void 0:i.url)||"none",info:JSON.stringify(n)}});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}function f(t,n){return d.apply(this,arguments)}function d(){return(d=(0,c.Z)(o().mark((function t(n,e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,u.ZP)("/workspace/deletePluginInfo",{method:"delete",requestType:"json",data:{workspaceId:e,pluginName:n.pluginId}});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}},76979:function(t,n,e){"use strict";e.d(n,{W:function(){return a}});var i=e(95764),r=e(64941),a=function(t,n){(0,r.bh)().addModule((0,i.Z)((0,i.Z)({},n),{},{id:t}))}},54516:function(t,n,e){"use strict";e.d(n,{v:function(){return r}});var i=e(44615);function r(){return(0,i.useSelector)((function(t){return t.walletSelector}))}},51875:function(t,n,e){"use strict";e.r(n),n.default=e.p+"assets/2.0.0/static/media/metamask-logo.4c30344d.svg"},33196:function(){},38087:function(){},8092:function(){},50936:function(){},27464:function(){},39415:function(){},44943:function(){},87374:function(){},29285:function(){},57267:function(){},59255:function(){},43194:function(){},57017:function(){}}]);
//# sourceMappingURL=4404.90b8a88c.chunk.js.map