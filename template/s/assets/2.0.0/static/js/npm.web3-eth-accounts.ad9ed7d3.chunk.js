(self.webpackChunkchainide=self.webpackChunkchainide||[]).push([[79],{78356:function(e,r,t){"use strict";var o=t(48834).Buffer,n=t(73558),a=t(33811),i=t(25482),s=t(34348),c=(t.g,t(5634)),d=t(14689),h=t(72692),u=t(89201),f=t(4732),{TransactionFactory:p}=t(83498),m=t(46446).default,l=t(46446).Hardfork,y=function(e){return"undefined"===typeof e||null===e},v=function(){var e=this;n.packageInit(this,arguments),delete this.BatchRequest,delete this.extend;var r=[new a({name:"getNetworkId",call:"net_version",params:0,outputFormatter:parseInt}),new a({name:"getChainId",call:"eth_chainId",params:0,outputFormatter:u.hexToNumber}),new a({name:"getGasPrice",call:"eth_gasPrice",params:0}),new a({name:"getTransactionCount",call:"eth_getTransactionCount",params:2,inputFormatter:[function(e){if(u.isAddress(e))return e;throw new Error("Address "+e+' is not a valid address to get the "transactionCount".')},function(){return"latest"}]}),new a({name:"getBlockByNumber",call:"eth_getBlockByNumber",params:2,inputFormatter:[function(e){return e?u.toHex(e):"latest"},function(){return!1}]})];this._ethereumCall={},r.forEach((r=>{r.attachToObject(e._ethereumCall),r.setRequestManager(e._requestManager)})),this.wallet=new x(this)};function g(e,r){return new Promise(((t,o)=>{try{r.type<"0x2"&&void 0!==r.gasPrice?t({gasPrice:r.gasPrice}):Promise.all([e._ethereumCall.getBlockByNumber(),e._ethereumCall.getGasPrice()]).then((e=>{const[o,n]=e;if("0x2"===r.type&&o&&o.baseFeePerGas){let e,n;r.gasPrice?(e=r.gasPrice,n=r.gasPrice,delete r.gasPrice):(e=r.maxPriorityFeePerGas||"0x3B9ACA00",n=r.maxFeePerGas||u.toHex(u.toBN(o.baseFeePerGas).mul(u.toBN(2)).add(u.toBN(e)))),t({maxFeePerGas:n,maxPriorityFeePerGas:e})}else{if(r.maxPriorityFeePerGas||r.maxFeePerGas)throw Error("Network doesn't support eip-1559");t({gasPrice:n})}}))}catch(n){o(n)}}))}function x(e){this._accounts=e,this.length=0,this.defaultKeyName="web3js_wallet"}v.prototype._addAccountFunctions=function(e){var r=this;return e.signTransaction=function(t,o){return r.signTransaction(t,e.privateKey,o)},e.sign=function(t){return r.sign(t,e.privateKey)},e.encrypt=function(t,o){return r.encrypt(e.privateKey,t,o)},e},v.prototype.create=function(e){return this._addAccountFunctions(i.create(e||u.randomHex(32)))},v.prototype.privateKeyToAccount=function(e,r){if(e.startsWith("0x")||(e="0x"+e),!r&&66!==e.length)throw new Error("Private key must be 32 bytes long");return this._addAccountFunctions(i.fromPrivate(e))},v.prototype.signTransaction=function(e,r,t){var n=this,a=!1,i={},s=!(!e||!(e.chain&&e.hardfork||e.common));if(t=t||function(){},!e)return a=new Error("No transaction object given!"),t(a),Promise.reject(a);function c(e){const n=function(e){if(e.common&&e.chain&&e.hardfork)return new Error("Please provide the @ethereumjs/common object or the chain and hardfork property but not all together.");if(e.chain&&!e.hardfork||e.hardfork&&!e.chain)return new Error('When specifying chain and hardfork, both values must be defined. Received "chain": '+e.chain+', "hardfork": '+e.hardfork);if(!e.gas&&!e.gasLimit&&!e.maxPriorityFeePerGas&&!e.maxFeePerGas)return new Error('"gas" is missing');if(e.gas&&e.gasPrice){if(e.gas<0||e.gasPrice<0)return new Error("Gas or gasPrice is lower than 0")}else if(e.maxPriorityFeePerGas<0||e.maxFeePerGas<0)return new Error("maxPriorityFeePerGas or maxFeePerGas is lower than 0");if(e.nonce<0||e.chainId<0)return new Error("Nonce or chainId is lower than 0");return}(e);if(n)return t(n),Promise.reject(n);try{var a=f.formatters.inputCallFormatter(Object.assign({},e));a.data=a.data||"0x",a.value=a.value||"0x",a.gasLimit=a.gasLimit||a.gas,"0x1"===a.type&&void 0===a.accessList&&(a.accessList=[]),s?(a.common&&(i.common=m.forCustomChain(a.common.baseChain||"mainnet",{name:a.common.customChain.name||"custom-network",networkId:a.common.customChain.networkId,chainId:a.common.customChain.chainId},a.common.hardfork||l.London),delete a.common),a.chain&&(i.chain=a.chain,delete a.chain),a.hardfork&&(i.hardfork=a.hardfork,delete a.hardfork)):(i.common=m.forCustomChain("mainnet",{name:"custom-network",networkId:a.networkId,chainId:a.chainId},a.hardfork||l.London),delete a.networkId),r.startsWith("0x")&&(r=r.substring(2));var c=p.fromTxData(a,i).sign(o.from(r,"hex")),d=c.validate(!0);if(d.length>0){let e="Signer Error: ";for(const r of d)e+=`${e} ${r}.`;throw new Error(e)}var h="0x"+c.serialize().toString("hex"),y=u.keccak256(h),v={messageHash:"0x"+o.from(c.getMessageToSign(!0)).toString("hex"),v:"0x"+o.from(c.v).toString("hex"),r:"0x"+o.from(c.r).toString("hex"),s:"0x"+o.from(c.s).toString("hex"),rawTransaction:h,transactionHash:y};return t(null,v),v}catch(g){return t(g),Promise.reject(g)}}return e.type=function(e){const r=void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas;let t;t=void 0!==e.type?u.toHex(e.type):void 0===e.type&&r?"0x2":"0x0";if(void 0!==e.gasPrice&&("0x2"===t||r))throw Error("eip-1559 transactions don't support gasPrice");if(("0x1"===t||"0x0"===t)&&r)throw Error("pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas");r||e.common&&e.common.hardfork&&e.common.hardfork.toLowerCase()===l.London||e.hardfork&&e.hardfork.toLowerCase()===l.London?t="0x2":(e.accessList||e.common&&e.common.hardfork&&e.common.hardfork.toLowerCase()===l.Berlin||e.hardfork&&e.hardfork.toLowerCase()===l.Berlin)&&(t="0x1");return t}(e),void 0!==e.nonce&&void 0!==e.chainId&&(void 0!==e.gasPrice||void 0!==e.maxFeePerGas&&void 0!==e.maxPriorityFeePerGas)&&s?Promise.resolve(c(e)):Promise.all([y(e.chainId)?n._ethereumCall.getChainId():e.chainId,y(e.nonce)?n._ethereumCall.getTransactionCount(n.privateKeyToAccount(r).address):e.nonce,y(s)?n._ethereumCall.getNetworkId():1,g(n,e)]).then((function(r){if(y(r[0])||y(r[1])||y(r[2])||y(r[3]))throw new Error('One of the values "chainId", "networkId", "gasPrice", or "nonce" couldn\'t be fetched: '+JSON.stringify(r));return c({...e,chainId:r[0],nonce:r[1],networkId:r[2],...r[3]})}))},v.prototype.recoverTransaction=function(e,r={}){const t=o.from(e.slice(2),"hex"),n=p.fromSerializedData(t);return u.toChecksumAddress(n.getSenderAddress().toString("hex"))},v.prototype.hashMessage=function(e){var r=u.isHexStrict(e)?e:u.utf8ToHex(e),t=u.hexToBytes(r),n=o.from(t),a="\x19Ethereum Signed Message:\n"+t.length,i=o.from(a),c=o.concat([i,n]);return s.keccak256s(c)},v.prototype.sign=function(e,r){if(r.startsWith("0x")||(r="0x"+r),66!==r.length)throw new Error("Private key must be 32 bytes long");var t=this.hashMessage(e),o=i.sign(t,r),n=i.decodeSignature(o);return{message:e,messageHash:t,v:n[0],r:n[1],s:n[2],signature:o}},v.prototype.recover=function(e,r,t){var o=[].slice.apply(arguments);return e&&"object"===typeof e?this.recover(e.messageHash,i.encodeSignature([e.v,e.r,e.s]),!0):(t||(e=this.hashMessage(e)),o.length>=4?(t="boolean"===typeof(t=o.slice(-1)[0])&&!!t,this.recover(e,i.encodeSignature(o.slice(1,4)),t)):i.recover(e,r))},v.prototype.decrypt=function(e,r,t){if("string"!==typeof r)throw new Error("No password given.");var n,a,i=e&&"object"===typeof e?e:JSON.parse(t?e.toLowerCase():e);if(3!==i.version)throw new Error("Not a valid V3 wallet");if("scrypt"===i.crypto.kdf)a=i.crypto.kdfparams,n=d.syncScrypt(o.from(r),o.from(a.salt,"hex"),a.n,a.r,a.p,a.dklen);else{if("pbkdf2"!==i.crypto.kdf)throw new Error("Unsupported key derivation scheme");if("hmac-sha256"!==(a=i.crypto.kdfparams).prf)throw new Error("Unsupported parameters to PBKDF2");n=c.pbkdf2Sync(o.from(r),o.from(a.salt,"hex"),a.c,a.dklen,"sha256")}var s=o.from(i.crypto.ciphertext,"hex");if(u.sha3(o.from([...n.slice(16,32),...s])).replace("0x","")!==i.crypto.mac)throw new Error("Key derivation failed - possibly wrong password");var h=c.createDecipheriv(i.crypto.cipher,n.slice(0,16),o.from(i.crypto.cipherparams.iv,"hex")),f="0x"+o.from([...h.update(s),...h.final()]).toString("hex");return this.privateKeyToAccount(f,!0)},v.prototype.encrypt=function(e,r,t){var n,a=this.privateKeyToAccount(e,!0),i=(t=t||{}).salt||c.randomBytes(32),s=t.iv||c.randomBytes(16),f=t.kdf||"scrypt",p={dklen:t.dklen||32,salt:i.toString("hex")};if("pbkdf2"===f)p.c=t.c||262144,p.prf="hmac-sha256",n=c.pbkdf2Sync(o.from(r),o.from(p.salt,"hex"),p.c,p.dklen,"sha256");else{if("scrypt"!==f)throw new Error("Unsupported kdf");p.n=t.n||8192,p.r=t.r||8,p.p=t.p||1,n=d.syncScrypt(o.from(r),o.from(p.salt,"hex"),p.n,p.r,p.p,p.dklen)}var m=c.createCipheriv(t.cipher||"aes-128-ctr",n.slice(0,16),s);if(!m)throw new Error("Unsupported cipher");var l=o.from([...m.update(o.from(a.privateKey.replace("0x",""),"hex")),...m.final()]),y=u.sha3(o.from([...n.slice(16,32),...l])).replace("0x","");return{version:3,id:h.v4({random:t.uuid||c.randomBytes(16)}),address:a.address.toLowerCase().replace("0x",""),crypto:{ciphertext:l.toString("hex"),cipherparams:{iv:s.toString("hex")},cipher:t.cipher||"aes-128-ctr",kdf:f,kdfparams:p,mac:y.toString("hex")}}},x.prototype._findSafeIndex=function(e){return e=e||0,this.hasOwnProperty(e)?this._findSafeIndex(e+1):e},x.prototype._currentIndexes=function(){return Object.keys(this).map((function(e){return parseInt(e)})).filter((function(e){return e<9e20}))},x.prototype.create=function(e,r){for(var t=0;t<e;++t)this.add(this._accounts.create(r).privateKey);return this},x.prototype.add=function(e){return"string"===typeof e&&(e=this._accounts.privateKeyToAccount(e)),this[e.address]?this[e.address]:((e=this._accounts.privateKeyToAccount(e.privateKey)).index=this._findSafeIndex(),this[e.index]=e,this[e.address]=e,this[e.address.toLowerCase()]=e,this.length++,e)},x.prototype.remove=function(e){var r=this[e];return!(!r||!r.address)&&(this[r.address].privateKey=null,delete this[r.address],this[r.address.toLowerCase()].privateKey=null,delete this[r.address.toLowerCase()],this[r.index].privateKey=null,delete this[r.index],this.length--,!0)},x.prototype.clear=function(){var e=this;return this._currentIndexes().forEach((function(r){e.remove(r)})),this},x.prototype.encrypt=function(e,r){var t=this;return this._currentIndexes().map((function(o){return t[o].encrypt(e,r)}))},x.prototype.decrypt=function(e,r){var t=this;return e.forEach((function(e){var o=t._accounts.decrypt(e,r);if(!o)throw new Error("Couldn't decrypt accounts. Password wrong?");t.add(o)})),this},x.prototype.save=function(e,r){return localStorage.setItem(r||this.defaultKeyName,JSON.stringify(this.encrypt(e))),!0},x.prototype.load=function(e,r){var t=localStorage.getItem(r||this.defaultKeyName);if(t)try{t=JSON.parse(t)}catch(o){}return this.decrypt(t||[],e)},function(e){var r;try{r=window[e];var t="__storage_test__";return r.setItem(t,t),r.removeItem(t),!0}catch(o){return o&&(22===o.code||1014===o.code||"QuotaExceededError"===o.name||"NS_ERROR_DOM_QUOTA_REACHED"===o.name)&&r&&0!==r.length}}("localStorage")||(delete x.prototype.save,delete x.prototype.load),e.exports=v},72692:function(e,r,t){var o=t(46557),n=t(12786),a=n;a.v1=o,a.v4=n,e.exports=a},63905:function(e){for(var r=[],t=0;t<256;++t)r[t]=(t+256).toString(16).substr(1);e.exports=function(e,t){var o=t||0,n=r;return[n[e[o++]],n[e[o++]],n[e[o++]],n[e[o++]],"-",n[e[o++]],n[e[o++]],"-",n[e[o++]],n[e[o++]],"-",n[e[o++]],n[e[o++]],"-",n[e[o++]],n[e[o++]],n[e[o++]],n[e[o++]],n[e[o++]],n[e[o++]]].join("")}},2494:function(e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var t=new Uint8Array(16);e.exports=function(){return r(t),t}}else{var o=new Array(16);e.exports=function(){for(var e,r=0;r<16;r++)0===(3&r)&&(e=4294967296*Math.random()),o[r]=e>>>((3&r)<<3)&255;return o}}},46557:function(e,r,t){var o,n,a=t(2494),i=t(63905),s=0,c=0;e.exports=function(e,r,t){var d=r&&t||0,h=r||[],u=(e=e||{}).node||o,f=void 0!==e.clockseq?e.clockseq:n;if(null==u||null==f){var p=a();null==u&&(u=o=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=n=16383&(p[6]<<8|p[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),l=void 0!==e.nsecs?e.nsecs:c+1,y=m-s+(l-c)/1e4;if(y<0&&void 0===e.clockseq&&(f=f+1&16383),(y<0||m>s)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,c=l,n=f;var v=(1e4*(268435455&(m+=122192928e5))+l)%4294967296;h[d++]=v>>>24&255,h[d++]=v>>>16&255,h[d++]=v>>>8&255,h[d++]=255&v;var g=m/4294967296*1e4&268435455;h[d++]=g>>>8&255,h[d++]=255&g,h[d++]=g>>>24&15|16,h[d++]=g>>>16&255,h[d++]=f>>>8|128,h[d++]=255&f;for(var x=0;x<6;++x)h[d+x]=u[x];return r||i(h)}},12786:function(e,r,t){var o=t(2494),n=t(63905);e.exports=function(e,r,t){var a=r&&t||0;"string"==typeof e&&(r="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,r)for(var s=0;s<16;++s)r[a+s]=i[s];return r||n(i)}}}]);
//# sourceMappingURL=npm.web3-eth-accounts.ad9ed7d3.chunk.js.map